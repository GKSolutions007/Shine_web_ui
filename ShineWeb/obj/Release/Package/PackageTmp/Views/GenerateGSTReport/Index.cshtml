@model ShineWeb.Models.SingleMasterModel
@{
    ViewBag.Title = ViewData["FormName"];
}
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/navbar.css" rel="stylesheet" />
<link href="~/Content/buttonTop.css" rel="stylesheet" />
<link href="~/Content/Snackbar.css" rel="stylesheet" />
<link rel="stylesheet" href="~/Content/jquery-ui.css">
<link href="~/Content/dataTables.dataTables.2.2.2.css" rel="stylesheet" />
<script src="~/Scripts/bootstrap.min.js"></script>
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script src="~/Scripts/jquery-3.7.1.js"></script>
<script src="~/Scripts/jquery-ui.js"></script>
<script src="~/Scripts/dataTables.2.2.2.js"></script>
<script src="~/Scripts/js/refreshtoken.js"></script>
<style>
    .gdInput {
        width: 100%;
        height: 25px;
        border-width: 0 0 0.1px 0;
        border-color: #e0d6d6;
    }

    each {
        border-bottom: 1px solid #555;
        padding: 3px 0;
    }

    .acItem .name {
        font-size: 14px;
        font-family: Arial, Helvetica, sans-serif;
    }

    .acItem .desc {
        font-size: 10px;
        font-family: Arial, Helvetica, sans-serif;
        color: #555;
    }

    .ui-autocomplete {
        max-height: 245px;
        overflow-y: auto;
        overflow-x: hidden;
    }

    td {
        font-size: 11px;
    }

    input[type=number] {
        text-align: right;
    }

        input[type=number]::placeholder {
            text-align: left;
        }
    /* Chrome, Safari, Edge, Opera */
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    /* Firefox */
    input[type=number] {
        -moz-appearance: textfield;
    }
    /* The Modal (background) */
    .modalBatch {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 10; /* Sit on top */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        /*overflow: auto;*/ /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }

    /* Modal Content/Box */
    @@media only screen and (min-width: 600px) {
        .modalBatch-content {
            background-color: #ffffff;
            margin: 3% auto; /* 15% from the top and centered */
            padding: 10px;
            border: 1px solid #888;
            width: 35%; /* Could be more or less, depending on screen size */
            height: 70%;
            top: 5%;
            /* overflow: auto;*/
        }
    }

    @@media only screen and (max-width: 600px) {
        .modalBatch-content {
            background-color: #ffffff;
            margin: 10% auto; /* 15% from the top and centered */
            padding: 25px;
            border: 1px solid #888;
            width: 95%; /* Could be more or less, depending on screen size */
            height: 80%;
            top: 20%;
            /*overflow: auto;*/
        }
    }
    /* The Close Button */
    .closefg {
        color: #aaa;
        float: right;
        font-size: 10px;
        font-weight: bold;
    }

        .closefg:hover,
        .closefg:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

    .form-label {
        position: relative;
        display: block;
        clear: both;
        max-width: 500px;
        margin: 0 auto;
    }

    .labelup {
        -webkit-transform: translateY(50%);
        -moz-transform: translateY(-50%);
        -ms-transform: translateY(-50%);
        -o-transform: translateY(-50%);
        transform: translateY(50%);
        -webkit-transition: all 0.2s ease-in-out;
        -moz-transition: all 0.2s ease-in-out;
        transition: all 0.2s ease-in-out;
        position: absolute;
        top: -40%;
        left: 1em;
        background: #fffefe;
        color: #2b2828;
        font-size: 0.8em;
        cursor: text;
        pointer-events: none;
        font-family: sans-serif;
    }
</style>
<style>
    .quick-access {
        background-color: #fff3cd;
        padding: 5px;
        font-weight: bold;
        border: 1px solid #eee;
    }

    .form-section {
        background-color: #d9edf7;
        padding: 5px;
        border: 1px solid #bce8f1;
    }

    .btn-group {
        margin-top: 5px;
    }

    label {
        font-weight: normal;
    }

    .quick-form-container {
        position: fixed; /* stays in top-right even on scroll */
        top: 100px;
        right: 20px;
        width: 220px;
        z-index: 1;
    }

    .container {
        padding: 0px !important;
    }

    .Transvariant-container {
        position: fixed; /* stays in top-right even on scroll */
        top: 260px;
        right: 20px;
        width: 220px;
        z-index: 1;
    }
</style>
<body>
    @Html.HiddenFor(model => model.FormID, new { @autocomplete = "off", @class = "form-control", @id = "txtFormID" })
    @Html.HiddenFor(model => model.FormName, new { @autocomplete = "off", @class = "form-control", @id = "txtFormName" })
    @Html.HiddenFor(model => model.ID, new { @autocomplete = "off", @class = "form-control", @id = "txtID" })
    <h4 id="MainHeading">@ViewData["FormName"]</h4>
    <hr />
    <div class="toastBox"></div>
    <div class="quick-form-container">
        <div class="quick-access">GST Report</div>
        <div class="form-section">
            <div>
                <label for="txtCode"> From Date</label>
                <span class="form-label">
                    <input class="form-control FormfilterclrField" type="date" id="dtpFFrom" placeholder="" oninput="javascript: if (this.value > this.max) { this.value = this.max; }">

                </span>
                <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrFFrom" class="clrdivs"></div>
            </div>
            <div>
                <label>To Date</label>
                <span class="form-label">
                    <input class="form-control FormfilterclrField" type="date" id="dtpFTo" placeholder="" oninput="javascript: if (this.value > this.max) { this.value = this.max; }">

                </span>
                <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrFTo" class="clrdivs"></div>
            </div>
            <div style="padding-left:10px;" hidden>
               <input type="checkbox" id="chkWithoutEInvoice"/> <label for="chkWithoutEInvoice">Without E-Invoice</label>               
            </div>
            <div style="padding-top:15px;">
                <table width="100%">
                    <tr>
                        <td align="left">
                            <button type="button" id="btnQAClear" class="btn btn-danger"><span class="glyphicon glyphicon-refresh"> Reset </span></button>
                        </td>
                        <td align="right">
                            <button type="button" id="btnQASubmit" class="btn btn-success"><span class="glyphicon glyphicon-saved"> Generate </span></button>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

</body>
<script type="text/javascript">
    var Aurl = '@Session["APIurl"]';
    setDate("dtpFFrom", 6);
    setDate("dtpFTo", 7);
    $("#btnQAClear").click(function () {
        setDate("dtpFFrom", 6);
        setDate("dtpFTo", 7);
    });
    $("#btnQASubmit").click(function () {        
        var IsValid = true;
        if ($("#dtpFFrom").val() == "") {
            IsValid = false;
            $("#divErrFFrom").html("From date should not be empty");
        }
        if ($("#dtpFTo").val() == "") {
            IsValid = false;
            $("#divErrFTo").html("To date should not be empty");
        }
        if ($("#dtpFFrom").val() > $("#dtpFTo").val()) {
            IsValid = false;
            $("#divErrFFrom").html("From date should be lessthan To Date");
        }
        if (IsValid) {
            $("#btnQASubmit").prop("disabled", true);
            GenerateReport();
            $("#btnQASubmit").prop("disabled", false);
        }
    });
    function GenerateReport() {
        var EInv = $("#chkWithoutEInvoice").is(":checked") ? 1 : 0
        location.href = Aurl + 'gstreportexport/gstexport?FromDate=' + $("#dtpFFrom").val() + "&ToDate=" + $("#dtpFTo").val() + "&EInvOnly=" + EInv;
    }
</script>
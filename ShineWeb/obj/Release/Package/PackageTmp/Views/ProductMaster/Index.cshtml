@model ShineWeb.Models.SingleMasterModel
@{
    //ViewData["TransType"]
    ViewBag.Title = ViewData["FormName"];
    if (ViewData["TransType"].ToString() == "2")
    {
        Layout = "~/Views/Shared/_LayoutWithoutheader.cshtml";
    }
}
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/navbar.css" rel="stylesheet" />
<link href="~/Content/buttonTop.css" rel="stylesheet" />
@*<link rel="stylesheet" href="~/Content/jquery-ui.css">*@
<link href="~/Content/dataTables.dataTables.2.2.2.css" rel="stylesheet" />

<script src="~/Scripts/bootstrap.min.js"></script>
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script src="~/Scripts/jquery-3.7.1.js"></script>
<script src="~/Scripts/jquery-ui.js"></script>
<script src="~/Scripts/dataTables.2.2.2.js"></script>
<script src="~/Scripts/js/refreshtoken.js"></script>
<style>
    each {
        border-bottom: 1px solid #555;
        padding: 3px 0;
    }

    .acItem .name {
        font-size: 14px;
        font-family: Arial, Helvetica, sans-serif;
    }

    .acItem .desc {
        font-size: 10px;
        font-family: Arial, Helvetica, sans-serif;
        color: #555;
    }

    .ui-autocomplete {
        max-height: 245px;
        overflow-y: auto;
        overflow-x: hidden;
    }

    td {
        font-size: 11px;
    }

    input[type=number] {
        text-align: right;
    }

        input[type=number]::placeholder {
            text-align: left;
        }
    /* Chrome, Safari, Edge, Opera */
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    /* Firefox */
    input[type=number] {
        -moz-appearance: textfield;
    }
    /* The Modal (background) */
    .modalBatch {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 10; /* Sit on top */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }

    /* Modal Content/Box */
    @@media only screen and (min-width: 600px) {
        .modalBatch-content {
            background-color: #ffffff;
            margin: 3% auto; /* 15% from the top and centered */
            padding: 10px;
            border: 1px solid #888;
            width: 90%; /* Could be more or less, depending on screen size */
            height: 70%;
            top: 5%;
            overflow: auto;
        }
    }

    @@media only screen and (max-width: 600px) {
        .modalBatch-content {
            background-color: #ffffff;
            margin: 10% auto; /* 15% from the top and centered */
            padding: 25px;
            border: 1px solid #888;
            width: 95%; /* Could be more or less, depending on screen size */
            height: 80%;
            top: 20%;
            overflow: auto;
        }
    }
    /* The Close Button */
    .closefg {
        color: #aaa;
        float: right;
        font-size: 10px;
        font-weight: bold;
    }

        .closefg:hover,
        .closefg:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

    /* Style the tab */
    .tab {
        overflow: hidden;
        /*border: 1px solid #ccc;
        background-color: #f1f1f1;*/
    }

        /* Style the buttons inside the tab */
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding-top: 5px;
            padding-bottom: 5px;
            padding-left: 12px;
            transition: 0.5s;
            font-size: 15px;
            border-radius: 5px;
        }

            /* Change background color of buttons on hover */
            .tab button:hover {
                background-color: lightskyblue;
            }

            /* Create an active/current tablink class */
            .tab button.active {
                background-color: #ccc;
            }

    /* Style the tab content */
    .tabcontent {
        display: none;
        /*padding: 6px 12px;*/
        border: none;
        border-top: none;
    }

    .form-label {
        position: relative;
        display: block;
        clear: both;
        max-width: 500px;
        margin: 0 auto;
    }

    .labelup {
        -webkit-transform: translateY(50%);
        -moz-transform: translateY(-50%);
        -ms-transform: translateY(-50%);
        -o-transform: translateY(-50%);
        transform: translateY(50%);
        -webkit-transition: all 0.2s ease-in-out;
        -moz-transition: all 0.2s ease-in-out;
        transition: all 0.2s ease-in-out;
        position: absolute;
        top: -40%;
        left: 1em;
        background: #fffefe;
        color: #2b2828;
        font-size: 0.90em;
        cursor: text;
        pointer-events: none;
        font-family: sans-serif;
    }

    .labelupfortextarea {
        -webkit-transform: translateY(50%);
        -moz-transform: translateY(-50%);
        -ms-transform: translateY(-50%);
        -o-transform: translateY(-50%);
        transform: translateY(50%);
        -webkit-transition: all 0.2s ease-in-out;
        -moz-transition: all 0.2s ease-in-out;
        transition: all 0.2s ease-in-out;
        position: absolute;
        top: -27%;
        left: 1em;
        background: #fffefe;
        color: #2b2828;
        font-size: 1em;
        cursor: text;
        pointer-events: none;
        font-family: sans-serif;
    }
    /*input:focus + .labelup,
    input:not(:placeholder-shown) + .labelup, textarea:focus + .labelup, textarea:not(:placeholder-shown) + .labelup {
        top: -35%;
        font-size: .9em;
        padding: 0 .3em;
        background: #F9F9F9;
        color: #000000;
    }*/
    .tablinks {
        text-decoration: underline;
        color: dodgerblue;
    }
    /* The Modal (background) */
    .modalBatchiframe {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 10; /* Sit on top */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }

    /* Modal Content/Box */
    @@media only screen and (min-width: 600px) {
        .modalBatchiframe-content {
            background-color: #ffffff;
            margin: 3% auto; /* 15% from the top and centered */
            padding: 10px;
            border: 1px solid #888;
            width: 85%; /* Could be more or less, depending on screen size */
            height: 70%;
            top: 5%;
            overflow: auto;
        }
    }

    @@media only screen and (max-width: 600px) {
        .modalBatchiframe-content {
            background-color: #ffffff;
            margin: 10% auto; /* 15% from the top and centered */
            padding: 25px;
            border: 1px solid #888;
            width: 95%; /* Could be more or less, depending on screen size */
            height: 80%;
            top: 20%;
            overflow: auto;
        }
    }
    /* The Close Button */
    .closefgiframe {
        color: #aaa;
        float: right;
        font-size: 10px;
        font-weight: bold;
    }

        .closefgiframe:hover,
        .closefgiframe:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
</style>
<body>

    @Html.HiddenFor(model => model.Add, new { @autocomplete = "off", @class = "form-control", @id = "txtAddID" })
    @Html.HiddenFor(model => model.Modify, new { @autocomplete = "off", @class = "form-control", @id = "txtModifyID" })
    @Html.HiddenFor(model => model.Variant, new { @autocomplete = "off", @class = "form-control", @id = "txtVariantID" })
    @Html.HiddenFor(model => model.View, new { @autocomplete = "off", @class = "form-control", @id = "txtViewID" })
    @Html.HiddenFor(model => model.FormName, new { @autocomplete = "off", @class = "form-control", @id = "txtFormName" })
    @Html.HiddenFor(model => model.EnableReturnPrice, new { @autocomplete = "off", @class = "form-control", @id = "txtReurnPricePerm" })
    @Html.HiddenFor(model => model.EnableUpdateTransPrice, new { @autocomplete = "off", @class = "form-control", @id = "txtEnableUpdateTransPricePerm" })
    @Html.HiddenFor(model => model.ID, new { @autocomplete = "off", @class = "form-control FormclrField", @id = "txtID" })
    @Html.HiddenFor(model => model.TransType, new { @autocomplete = "off", @class = "form-control FormclrField", @id = "txtTransType" })
    @Html.HiddenFor(model => model.DependFrom, new { @autocomplete = "off", @class = "form-control", @id = "txtDependFrom" })

    <h4 id="MainHeading">@ViewData["FormName"]</h4>
    <hr />
    <div class="toastBox"></div>
    <div style="padding-bottom:10px;">
        <button id="btnAdd" class="btn btn-info"><span class="glyphicon glyphicon-plus" style="color: white"></span>&#x2009;Add</button>
    </div>
    <div id="dvMainTable">
        <table class="table table-bordered" id="tblMasterData" width="100%">
            <thead>
                <tr class="trclrforcolheader">
                    <th style="text-align:center;font-size: 12px;width:0%;">ID</th>
                    <th style="text-align:center;font-size: 12px;width:12%;">Code</th>
                    <th style="text-align:center;font-size: 12px;width:15%;">Name</th>
                    <th style="text-align:center;font-size: 12px;width:13%;">EAN</th>
                    <th style="text-align:center;font-size: 12px;width:15%;">Manufacturer</th>
                    <th style="text-align:center;font-size: 12px;width:15%;">Brand</th>
                    <th style="text-align:center;font-size: 12px;width:15%;">Category</th>
                    <th style="text-align:center;font-size: 12px;width:5%;">Active</th>
                    <th style="text-align:center;font-size: 12px;width:10%;">User</th>
                    <th style="text-align:center;font-size: 12px;width:3%;" title="Edit">
                        <span class="glyphicon glyphicon-pencil" style="font-size:16px">
                        </span>
                    </th>
                    <th style="text-align:center;font-size: 12px;width:3%;" title="View">
                        <span class="glyphicon glyphicon-eye-open" style="font-size:16px">
                        </span>
                    </th>
                    <th style="text-align:center;font-size: 12px;width:4%;" title="Variant">
                        <span class="glyphicon glyphicon-file" style="font-size:12px">
                        </span>
                    </th>
                </tr>
            </thead>
        </table>
    </div>
    <div class="modalBatch" id="myModalfg">
        <div class="modal-dialog" style="width:auto;">
            <div class="modalBatch-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <button type="button" class="closefg">&times;</button>
                    <label class="modal-title" style="color:white";font-weight:800" id="lblPopupheading"><b>Add @ViewData["FormName"]</b></label>
                    @*<hr />*@
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <div style="padding-top:2px">
                        <div id="dvAssign" style="width:100%;padding-bottom:2px">
                            <div id="dvErrorDetail" style="background-color:white;border:thin;padding-bottom:3px;" hidden>
                                <label id="lblSaveError" style="color:red;font-size:10px"></label>
                            </div>
                            <div class="tab">
                                <button class="tablinks" id="btnProdDtl" onclick="openTabs(event, 'ProductDetails')">Product Details</button>
                                <button class="tablinks" onclick="openTabs(event, 'UOMDetails')">UOM</button>
                                <button class="tablinks" id="btnPriceDetails" onclick="openTabs(event, 'PriceDetails')">Price</button>
                                <button class="tablinks" onclick="openTabs(event, 'InventoryDetails')">Inventory</button>
                                <button class="tablinks" onclick="openTabs(event, 'OtherDetails')">Other Details</button>
                                <button class="tablinks" id="btnTransPrices" onclick="openTabs(event, 'TransactionPrice')">Transaction Price</button>
                                @*<table>
                                    <tr>
                                        <td>
                                            <span class="form-label">
                                                <select class="form-control">
                                                    <option value="1">Base - PCS</option>
                                                    <option value="1">Purchase - PCS</option>
                                                    <option value="1">Sales - PCS</option>
                                                </select>
                                                <label class="labelup">UOM</label>
                                            </span>
                                        </td>
                                        <td>
                                            <div>
                                                <span class="form-label">
                                                    <input tabindex="8" txtTag="0" class="form-control FormclrField txtsettag" type="number" id="txtPrice" placeholder=""
                                                           min="0" oninput="javascript: if (this.value < this.min) { this.value = 0 } ">
                                                    <label class="labelup">Price</label>
                                                </span>
                                                <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnProdDisc" class="clrdivs"></div>
                                            </div>
                                        </td>
                                    </tr>
                                    </table>*@
                            </div>
                            <br />
                            <div id="ProductDetails" class="tabcontent">
                                <div class="col-sm-12 col-md-12 col-lg-12" style="padding-bottom:10px;">
                                    <div class="col-sm-12 col-md-4 col-lg-4">
                                        <table class="table" style="width:100%">
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="1" class="form-control FormclrField" type="text" id="txtCode" placeholder=""
                                                       onbeforeinput="return AlphaNumericBeforeInput(event, this,'#divErrorOnCode')"
                                                        oninput="sanitizeAlphaNumeric(this, '#divErrorOnCode')"/>
                                                            <label class="labelup" for="txtCode">Product Code *</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnCode" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="2" class="form-control FormclrField" type="text" id="txtName" placeholder=""
                                                       onbeforeinput="return AlphaNumericBeforeInput(event, this,'#divErrorOnName')"
                                                        oninput="sanitizeAlphaNumeric(this, '#divErrorOnName')"/>
                                                            <label class="labelup" for="txtName">Product Name *</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnName" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="3" class="form-control FormclrField" type="text" id="txtEAN" placeholder=""
                                                       onbeforeinput="return AlphaNumericBeforeInput(event, this,'#divErrorOnEAN')"
                                                        oninput="sanitizeAlphaNumeric(this, '#divErrorOnEAN')"/>
                                                            <label class="labelup" for="txtEAN">EAN *</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnEAN" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-sm-12 col-md-4 col-lg-4">
                                        <table class="table" style="width:100%">
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="4" class="form-control FormclrField" type="text" id="txtMfr" placeholder="">
                                                            <label class="labelup" for="txtMfr">Manufacturer Name *</label>
                                                        </span>
                                                        <a href="javascript:void(0)" id="hrefNewManuf" hidden data-id="SingleMaster?name=AOYvdgbTMJLeEXtoZklfZw%3D%3D&strFormID=ydRRTTxkdt6Trx91pX1%2BcA%3D%3D&TypeID=jJOtHsRVwYECOhoiBc69dA%3D%3D&TranID=jJOtHsRVwYECOhoiBc69dA%3D%3D">New Manuf</a>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnMfr" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="5" class="form-control FormclrField" type="text" id="txtBrand" placeholder="">
                                                            <label class="labelup" for="txtBrand">Brand Name *</label>
                                                        </span>
                                                        <a href="javascript:void(0)" id="hrefNewBrand" hidden>New Brand</a>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnBrand" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="6" class="form-control FormclrField" type="email" id="txtCategory" placeholder="">
                                                            <label class="labelup" for="txtCategory">Category Name *</label>
                                                        </span>
                                                        <a href="javascript:void(0)" id="hrefNewCategory" hidden>New Category</a>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnCategory" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-sm-12 col-md-4 col-lg-4">
                                        <table class="table" width="100%">
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="7" class="form-control FormclrField" type="number" id="txtHSN" placeholder="" maxlength="8"
                                                                   oninput="javascript: if (this.value.length > this.maxLength) { this.value = this.value.slice(0, this.maxLength); }">
                                                            <label class="labelup" for="txtHSN">HSN Code</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnHSN" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="8" txtTag="0" class="form-control FormclrField txtsettag" type="number" id="txtProdDisc" placeholder=""
                                                                   min="0" oninput="javascript: if (this.value < this.min) { this.value = 0 } ">
                                                            <label class="labelup" for="txtProdDisc">Product Discount %</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnProdDisc" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div id="UOMDetails" class="tabcontent">
                                <div class="col-sm-12 col-md-12 col-lg-12" style="padding-bottom:10px;">
                                    <div class="col-sm-12 col-md-4 col-lg-4">
                                        <table class="table" style="width:100%">
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px" width="60%">
                                                    <div>
                                                        @*<label>Base UOM *</label>*@
                                                        <span class="form-label">
                                                            <select tabindex="1" id="cmbBaseUOM" class="form-control FormclrcmbField"><option value="0">Select Base UOM</option></select>
                                                            <label class="labelup">Base UOM *</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnBaseUOM" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border:none;padding-left:5px;padding-right:3px" width="40%">
                                                    <div>
                                                        @*<label>Conversion Value</label>*@
                                                        <span class="form-label">
                                                            <input tabindex="2" class="form-control FormclrField txtsettag" txtTag="0" title="Conversion Value" type="number" id="txtBaseCR" placeholder="">
                                                            <label class="labelup">Base Qty</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnBaseCR" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <div>
                                                        @*<label>Purchase UOM *</label>*@
                                                        <span class="form-label">
                                                            <select tabindex="3" id="cmbPurchaseUOM" class="form-control FormclrcmbField"><option value="0">Select Purchase UOM</option></select>
                                                            <label class="labelup">Purchase UOM *</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnPurchaseUOM" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border:none;padding-left:5px;padding-right:3px" width="40%">
                                                    <div>
                                                        @*<label>Conversion Value</label>*@
                                                        <span class="form-label">
                                                            <input tabindex="4" class="form-control FormclrField txtsettag" txtTag="0" title="Conversion Value" type="number" id="txtPurchaseCR" placeholder="">
                                                            <label class="labelup">Base Qty</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnPurchaseCR" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-sm-12 col-md-4 col-lg-4">
                                        <table class="table" style="width:100%">
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <div>
                                                        @*<label>Sales UOM *</label>*@
                                                        <span class="form-label">
                                                            <select tabindex="5" id="cmbSalesUOM" class="form-control FormclrcmbField"><option value="0">Select Sales UOM</option></select>
                                                            <label class="labelup">Sales UOM *</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnSalesUOM" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border:none;padding-left:5px;padding-right:3px" width="40%">
                                                    <div>
                                                        @*<label>Conversion Value</label>*@
                                                        <span class="form-label">
                                                            <input tabindex="6" class="form-control FormclrField txtsettag" txtTag="0" title="Conversion Value" type="number" id="txtSalesCR" placeholder="">
                                                            <label class="labelup">Base Qty</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnSalesCR" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <div>
                                                        @*<label>Reporting UOM *</label>*@
                                                        <span class="form-label">
                                                            <select tabindex="7" id="cmbReportingUOM" class="form-control FormclrcmbField"><option value="0">Select Reporting UOM</option></select>
                                                            <label class="labelup">Reporting UOM *</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnReportingUOM" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border:none;padding-left:5px;padding-right:3px" width="40%">
                                                    <div>
                                                        @*<label>Conversion Value</label>*@
                                                        <span class="form-label">
                                                            <input tabindex="8" class="form-control FormclrField txtsettag" txtTag="0" title="Conversion Value" type="number" id="txtReportingCR" placeholder="">
                                                            <label class="labelup">Base Qty</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnReportingCR" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-sm-12 col-md-4 col-lg-4">

                                    </div>
                                </div>
                            </div>
                            <div id="PriceDetails" class="tabcontent">
                                <div class="col-sm-12 col-md-12 col-lg-12" style="padding-bottom: 10px;padding-right:2px;padding-left:2px; width: 100%">
                                    <div class="col-sm-12 col-md-2 col-lg-2">
                                        <table style="width:100%;">
                                            <tr class="bgclrfortr">
                                                <td style="border:none;" colspan="2">
                                                    <div>
                                                        @*<label>Purchase Tax</label>*@
                                                        <input id="txtPTaxPern" class="FormclrField" hidden />
                                                        <span class="form-label">
                                                            <select tabindex="1" id="cmbPTax" class="form-control FormclrcmbField"><option value="0">Select Tax</option></select>
                                                            <label class="labelup">Purchase Tax *</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnPTax" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr">
                                                <td style="border:none;" colspan="2">
                                                    <div>
                                                        @*<label>Sales Tax</label>*@
                                                        <input id="txtSTaxPern" class="FormclrField" hidden />
                                                        <span class="form-label">
                                                            <select tabindex="2" id="cmbSTax" class="form-control FormclrcmbField"><option value="0">Select Tax</option></select>
                                                            <label class="labelup">Sales Tax *</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnSTax" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="border:none;" colspan="2">
                                                    <span class="form-label">
                                                        <select class="form-control FormclrcmbField" id="cmbPriceUOM">
                                                        </select>
                                                        <label class="labelup">UOM</label>
                                                    </span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="border:none;">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="8" txtTag="0" class="form-control FormclrField txtsettag" type="number" id="txtPrice" placeholder=""
                                                                   min="0" oninput="javascript: if (this.value < this.min) { this.value = 0 } ">
                                                            <label class="labelup">Price Excl</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnPrice" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border:none;">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="8" txtTag="0" class="form-control FormclrField txtsettag" type="number" id="txtPriceIncl" placeholder=""
                                                                   min="0" oninput="javascript: if (this.value < this.min) { this.value = 0 } ">
                                                            <label class="labelup">Price Incl</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnPriceIncl" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-sm-12 col-md-4 col-lg-4">
                                        <table style="width:100%">
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <label><u> Exclusive</u></label>
                                                </td>
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <label><u>Inclusive</u></label>
                                                </td>
                                                <td style="border:none;padding-left:12px;padding-right:7px" align="center">
                                                    <label title="Retail %"><u>R %</u></label>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="3" txtTag="0" class="form-control FormclrField txtsettag txtPurchasetaxExcl" min="0" type="number" id="txtPurPrice" placeholder=""
                                                                   oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                            <label class="labelup" for="txtPurPrice">Purchase Price</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnPurPrice" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="3" txtTag="0" class="form-control FormclrField txtsettag txtPurchasetaxIncl" min="0" type="number" id="txtPurPriceIncl" placeholder=""
                                                                   oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnInclPurPrice" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border: none; padding-left: 12px; padding-right: 7px; width: 10%">
                                                    <label id="lblRetailPurchaseMarginPern" lbltag="0" class="lblsettag lblMargins">0.00</label>
                                                </td>
                                            </tr>

                                            <tr class="bgclrfortr" id="trRetPrice">
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="8" txtTag="0" class="form-control FormclrField txtsettag txtsaletaxExcl" min="0" type="number" id="txtRTNPrice" placeholder=""
                                                                   oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                            <label class="labelup" for="txtRTNPrice">Return Price</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnRTNPrice" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="8" txtTag="0" class="form-control FormclrField txtsettag txtsaletaxIncl" type="number" id="txtRTNPriceIncl" placeholder=""
                                                                   min="0" oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnInclRTNPrice" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="7" txtTag="0" class="form-control FormclrField txtsettag" type="number" id="txtMRP" placeholder=""
                                                                   min="0" oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                            <label class="labelup" for="txtMRP">MRP</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnMRP" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-6">
                                        <table style="width:100%">
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px" align="center">
                                                    <label><u>on MRP</u></label>
                                                </td>
                                                <td style="border:none;padding-left:12px;padding-right:7px" align="center">
                                                    <label><u>%</u></label>
                                                </td>
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <label><u> Exclusive</u></label>
                                                </td>
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <label><u>Inclusive</u></label>
                                                </td>
                                                <td style="border:none;padding-left:12px;padding-right:7px" align="center">
                                                    <label title="Distributors %"><u>D %</u></label>
                                                </td>
                                                <td style="border:none;padding-left:12px;padding-right:7px" align="center">
                                                    <label title="Retail %"><u>R %</u></label>
                                                </td>
                                            </tr>

                                            <tr class="bgclrfortr">
                                                <td style="border: none; padding-left: 12px; padding-right: 7px; width: 5%" align="center">
                                                    <input tabindex="1" type="checkbox" id="chkApplySalesPerc"> <label for="chkApplySalesPerc"> </label>
                                                </td>
                                                <td style="border:none;padding-left:12px;padding-right:7px;width:25%">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="4" txtTag="0" class="form-control FormclrField txtsettag txtsaletaxExclPerc" type="number" id="txtSPricePerc" placeholder=""
                                                                   min="0" oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                            <label class="labelup" for="txtSPrice">Sales %</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnSPricePerc" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border: none; padding-left: 12px; padding-right: 7px; width: 25%">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="4" txtTag="0" class="form-control FormclrField txtsettag txtsaletaxExcl" type="number" id="txtSPrice" placeholder=""
                                                                   min="0" oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                            <label class="labelup" for="txtSPrice">Sales Price</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnSPrice" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border: none; padding-left: 12px; padding-right: 7px; width: 25%">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="4" txtTag="0" class="form-control FormclrField txtsettag txtsaletaxIncl" type="number" id="txtSPriceIncl" placeholder=""
                                                                   min="0" oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnInclSPrice" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border: none; padding-left: 12px; padding-right: 7px; width: 10%">
                                                    <label id="lblSaleMarginPern" lbltag="0" class="lblsettag lblMargins">0.00</label>
                                                </td>
                                                <td style="border: none; padding-left: 12px; padding-right: 7px; width: 10%">
                                                    <label id="lblRetailSaleMarginPern" lbltag="0" class="lblsettag lblMargins">0.00</label>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr">

                                                <td style="border: none; padding-left: 12px; padding-right: 7px; width: 10%" align="center">
                                                    <input tabindex="1" type="checkbox" id="chkApplyECPPerc"> <label for="chkApplyECPPerc"> </label>
                                                </td>
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="5" txtTag="0" class="form-control FormclrField txtsettag txtsaletaxExclPerc" type="number" id="txtECPricePerc" placeholder=""
                                                                   min="0" oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                            <label class="labelup" for="txtSPrice">ECP %</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnECPricePerc" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="5" txtTag="0" class="form-control FormclrField txtsettag txtsaletaxExcl" type="number" id="txtECPrice" placeholder=""
                                                                   min="0" oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                            <label class="labelup" for="txtSPrice">ECP Price</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnECPrice" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="5" txtTag="0" class="form-control FormclrField txtsettag txtsaletaxIncl" type="number" id="txtECPriceIncl" placeholder=""
                                                                   min="0" oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnInclECPrice" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border: none; padding-left: 12px; padding-right: 7px; width: 25%">
                                                    <label id="lblECPMarginPern" lbltag="0" class="lblsettag lblMargins">0.00</label>
                                                </td>
                                                <td style="border: none; padding-left: 12px; padding-right: 7px; width: 25%">
                                                    <label id="lblRetailECPMarginPern" lbltag="0" class="lblsettag lblMargins">0.00</label>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr">

                                                <td style="border: none; padding-left: 12px; padding-right: 7px; width: 20%" align="center">
                                                    <input tabindex="1" type="checkbox" id="chkApplySPLPerc"> <label for="chkApplySPLPerc"> </label>
                                                    <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnTrackInv" class="clrdivs"></div>
                                                </td>
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="6" txtTag="0" class="form-control FormclrField txtsettag txtsaletaxPerc" type="number" id="txtSPLPricePerc" placeholder=""
                                                                   min="0" oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                            <label class="labelup" for="txtSPLPrice">Special %</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnSPLPricePerc" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="6" txtTag="0" class="form-control FormclrField txtsettag txtsaletaxExcl" type="number" id="txtSPLPrice" placeholder=""
                                                                   min="0" oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                            <label class="labelup" for="txtSPLPrice">Special Price</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnSPLPrice" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="6" txtTag="0" class="form-control FormclrField txtsettag txtsaletaxIncl" type="number" id="txtSPLPriceIncl" placeholder=""
                                                                   min="0" oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnInclSPLPrice" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border: none; padding-left: 12px; padding-right: 7px; width: 25%">
                                                    <label id="lblSPLMarginPern" lbltag="0" class="lblsettag lblMargins">0.00</label>
                                                </td>
                                                <td style="border: none; padding-left: 12px; padding-right: 7px; width: 25%">
                                                    <label id="lblRetailSPLMarginPern" lbltag="0" class="lblsettag lblMargins">0.00</label>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>

                                </div>
                            </div>
                            <div id="InventoryDetails" class="tabcontent">
                                <div class="col-sm-12 col-md-12 col-lg-12" style="padding-bottom:10px;">
                                    <div class="col-sm-12 col-md-4 col-lg-4">
                                        <table class="table" style="width:100%">
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <input tabindex="1" type="checkbox" id="chkTrackInv" checked> <label for="chkTrackInv"> Track Inventory</label>
                                                    <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnTrackInv" class="clrdivs"></div>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px;font-size:12px" colspan="2">
                                                    <input tabindex="2" type="checkbox" id="chkTrackBatch"> <label for="chkTrackBatch"> Track Batch</label>
                                                    <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnTrackBatch" class="clrdivs"></div>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr" hidden>
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <input tabindex="3" type="checkbox" id="chkTrackSerial"> <label style="font-size:13px;" for="chkTrackSerial"> Track Serial</label>
                                                    <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnTrackSerial" class="clrdivs"></div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-sm-12 col-md-5 col-lg-5">
                                        <table class="table" style="width:100%">
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <label style="font-size:13px;" for="chkTrackPKD">Track PKD : </label>&emsp;<input tabindex="4" type="checkbox" id="chkTrackPKD">
                                                    <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnTrackPKD" class="clrdivs"></div>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <label>Date Format : </label>&emsp;<label title="Date/Month/Year" for="rdoDMY" style="font-size:13px"><input tabindex="5" type="radio" name="rdoDF" id="rdoDMY" checked> DMY</label>
                                                    &emsp;
                                                    <label title="Month/Year" for="rdoMY" style="font-size:13px">
                                                        <input name="rdoDF" type="radio" id="rdoMY" value="MY"> MY
                                                    </label>
                                                    <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnTrackDF" class="clrdivs"></div>
                                                </td>
                                            </tr>

                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div id="OtherDetails" class="tabcontent">
                                <div class="col-sm-12 col-md-12 col-lg-12" style="padding-bottom:10px;">
                                    <div class="col-sm-12 col-md-4 col-lg-4">
                                        <table class="table" style="width:100%">
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <label style="font-size:13px;" for="chkBarcodePrint">Barcode Print : </label>&emsp;<input tabindex="4" type="checkbox" id="chkBarcodePrint">
                                                    <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnBarcodePrint" class="clrdivs"></div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="border:none;padding-left:12px;padding-right:7px" width="50%">
                                                    <div>
                                                        @*<label for="chkBarcode">Barcode UOM : </label>*@
                                                        <span class="form-label">
                                                            <select tabindex="1" id="cmbBarUOM" class="form-control FormclrcmbField"><option value="0">Select Barcode UOM</option></select>
                                                            <label class="labelup">Barcode UOM</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnBarUOM" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border:none;padding-left:12px;padding-right:7px" width="50%">
                                                    <div>
                                                        @*<label for="chkBarcode">Barcode Price : </label>*@
                                                        <span class="form-label">
                                                            <select tabindex="2" id="cmbBarPrice" class="form-control FormclrcmbField"><option value="0">Select Barcode Price</option></select>
                                                            <label class="labelup">Barcode Price</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnBarPrice" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="6" class="form-control FormclrField" type="text" id="txtLocation" placeholder="">
                                                            <label class="labelup" for="txtLocation">Location</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnLocation" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>

                                        </table>
                                    </div>
                                    <div class="col-sm-12 col-md-4 col-lg-4">
                                        <table class="table" style="width:100%">
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="3" class="form-control FormclrField" type="text" id="txtVendor" placeholder="">
                                                            <label class="labelup" for="txtVendor">Indent Vendor</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnVendor" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px" width="50%">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="4" class="form-control FormclrField" type="number" id="txtMOH" placeholder=""
                                                                   min="0" oninput="javascript: if (this.value < this.min) { this.value = 0 }" title="Maximum On Hand">
                                                            <label class="labelup" for="txtMOH">MOH</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnMOH" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                                <td style="border:none;padding-left:12px;padding-right:7px" width="50%">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="5" class="form-control FormclrField" type="number" id="txtMOQ" placeholder=""
                                                                   min="0" oninput="javascript: if (this.value < this.min) { this.value = 0 }" title="Minimum Order Quantity">
                                                            <label class="labelup" for="txtMOQ">MOQ</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnMOQ" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="5" class="form-control FormclrField" type="number" id="txtWebOrder" placeholder=""
                                                                   min="0" oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                            <label class="labelup" for="txtMOQ">Web Order</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnWebOrder" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-sm-12 col-md-4 col-lg-4">
                                        <table class="table" style="width:100%">
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <div>
                                                        <span class="form-label">
                                                            <textarea tabindex="7" class="form-control FormclrField" id="txtRemarks" placeholder="" rows="2"></textarea>
                                                            <label class="labelupfortextarea" for="txtRemarks">Remarks</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnRemarks" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <div>
                                                        @*<label for="chkBarcode">Barcode Price : </label>*@
                                                        <span class="form-label">
                                                            <select tabindex="2" id="cmbLifeTime" class="form-control FormclrcmbField"><option value="0">Select/option></select>
                                                            <label class="labelup">Shelf Life</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnLifeTime" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr">
                                                @*<td align="right" style="border:none" width="40%"><label for="chkActive">Active : </label></td>*@
                                                <td style="border:none;padding-left:12px;padding-right:7px" colspan="2">
                                                    <label for="chkActive">Active : </label>&emsp;<input tabindex="8" type="checkbox" id="chkActive">
                                                    <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnActive" class="clrdivs"></div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div id="TransactionPrice" class="tabcontent">
                                <label style="padding-bottom:7px;"><u> Exclusive :</u></label>
                                <div class="col-sm-12 col-md-12 col-lg-12" style="padding-bottom: 10px; width: 100%">

                                    <div class="col-sm-12 col-md-4 col-lg-4">
                                        <table style="width:100%">
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="3" txtTag="0" class="form-control FormclrField txtsettag" min="0" type="number" id="txtPurBillPrice" placeholder=""
                                                                   oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                            <label class="labelup">Purchase Bill</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnPurBillPrice" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="3" txtTag="0" class="form-control FormclrField txtsettag" min="0" type="number" id="txtPurRtnPrice" placeholder=""
                                                                   oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                            <label class="labelup">Purchase Return</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnPurRtnPrice" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-sm-12 col-md-4 col-lg-4">
                                        <table style="width:100%">
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="3" txtTag="0" class="form-control FormclrField txtsettag" min="0" type="number" id="txtInvoicePrice" placeholder=""
                                                                   oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                            <label class="labelup">Invoice</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnInvoicePrice" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="bgclrfortr">
                                                <td style="border:none;padding-left:12px;padding-right:7px">
                                                    <div>
                                                        <span class="form-label">
                                                            <input tabindex="3" txtTag="0" class="form-control FormclrField txtsettag" min="0" type="number" id="txtSaleRtnPrice" placeholder=""
                                                                   oninput="javascript: if (this.value < this.min) { this.value = 0 }">
                                                            <label class="labelup">Sales Return</label>
                                                        </span>
                                                        <div style="color: red; padding-top: 5px; padding-left: 5px;" id="divErrorOnSaleRtnPrice" class="clrdivs"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-sm-12 col-md-4 col-lg-4"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <span class="form-label">
                        @*<input tabindex="1" hidden type="text" id="txtCode1" placeholder="">*@
                        @*<label class="labelup" for="txtCode">Customer Code*</label>*@
                    </span>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer" style="background-color:skyblue">
                    <div style="padding-top:0px" align="right">
                        <button tabindex="32" type="button" class="btn btn-danger" id="btnClear"><span class="glyphicon glyphicon-refresh"> Clear</span></button>
                        <button tabindex="31" type="button" class="btn btn-success" id="btnSave"><span class="glyphicon glyphicon-saved"> Save</span></button>
                        <button tabindex="33" type="button" class="btn btn-warning" id="btnClose"><span class="glyphicon glyphicon-remove"> Close</span></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modalBatchiframe" id="myModalfgiframe">
        <div class="modal-dialog" style="width:auto;">
            <div class="modalBatchiframe-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <button type="button" class="closefgiframe">&times;</button>
                    <h5 class="modal-title" style="color:white" id="lbliframeheading"><b></b></h5>
                    @*<hr />*@
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <iframe src="" id="ifrSMG" style="width:100%;height:400px;"></iframe>
                </div>
            </div>
        </div>f
    </div>
</body>


<script type="text/javascript">
        var VarID = $("#txtVariantID").val();
var UID = '@Session["LoginUserID"]';
var nMode = 1;
    var FID = $("#txtFormID").val();
var EnableReturn = '@Session["EnableReturnPrice"]';
    var Aurl = '@Session["APIurl"]';
    //var Table = $('#tblMasterData').DataTable({pageLength: ItemsperPage,lengthMenu: [[10, 20, 50, 100, -1], [10, 20, 50, 100, "All"]],
    //    "bFilter": true,
    //    "bSearchable": true,
    //    "bInfo": true,
    //    "bPaginate": true,
    //    "ordering": false,
    //    scrollY: "400px",
    //    scrollX: true,
    //    scrollCollapse: true,
    //    "columnDefs": [{ "targets": [0], "visible": false, searchable: false }, { "targets": [7,8,9,10], "class": "text-center" }],
    //});
    var modaliframe = document.getElementById("myModalfgiframe");
    var spaniframe = document.getElementsByClassName("closefgiframe")[0];
    spaniframe.onclick = function () {
        modaliframe.style.display = "none";
    }

    $("#hrefNewManuf").click(function () {
        const id = $(this).data("id");
        alert('Data ID: ' + id);
        $("#lbliframeheading").text("Manufacturer");
        document.getElementById("ifrSMG").src = ManufLink;
        modaliframe.style.display = "block";
    });
    $("#hrefNewBrand").click(function () {
        $("#lbliframeheading").text("Brand");
        document.getElementById("ifrSMG").src = BrandLink;
        modaliframe.style.display = "block";
    });
    $("#hrefNewCategory").click(function () {
        $("#lbliframeheading").text("Category");
        document.getElementById("ifrSMG").src = CategoryLink;
        modaliframe.style.display = "block";
    });
    function openTabs(evt, TabName, opentype = 0) {

        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(TabName).style.display = "block";
        if (opentype == 0) {
            evt.currentTarget.className += " active";
        } else {
            document.getElementById(TabName).className += " active";
        }
    }

    if ($("#txtAddID").val() == 0) {
        $("#trAdd").hide();
        $("#btnAdd").hide();
    }

    if (EnableReturn == "0") {
        $("#trRetPrice").hide();
    }
    //if ($("#txtModifyID").val() == 0) {
    //    //$(".clsEdit").hide();
    //    Table.column(8).visible(false);
    //}
    //if ($("#txtViewID").val() == 0) {
    //    //$(".clsVariant").hide();
    //    Table.column(9).visible(false);
    //}
    //if ($("#txtVariantID").val() == 0) {
    //    //$(".clsVariant").hide();
    //    Table.column(10).visible(false);
    //}
    if ($("#txtModifyID").val() == 0 && $("#txtVariantID").val() == 0 && $("#txtViewID").val() == 0 && $("#txtAddID").val() == 1) {
        $("#dvMainTable").hide();
    }
    if ($("#txtEnableUpdateTransPricePerm").val() == 0) {
        $("#btnTransPrices").hide();
    }

    var Table = $('#tblMasterData').DataTable();
    AllProductData();
    function AllProductData() {
        $.ajax({
            url: Aurl + "productmaster/getalldata",
            type: "GET",
            datatype: "JSON",
            xhrFields: {
                withCredentials: true
            },
            data: { Mode: 3, Name: "" },
            success: function (data) {
                var prodjsdata = eval(data);
                var searchValue = '';
                if ($.fn.DataTable.isDataTable('#tblMasterData')) {
                    searchValue = $('#tblMasterData').DataTable().search(); // get current search term
                }
                var searchValue = '';
                if ($.fn.DataTable.isDataTable('#tblMasterData')) {
                    searchValue = $('#tblMasterData').DataTable().search(); // get current search term
                }

                $('#tblMasterData').DataTable({pageLength: ItemsperPage,lengthMenu: [[10, 20, 50, 100, -1], [10, 20, 50, 100, "All"]],
                    scrollY: "450px",
                    scrollX: true,
                    scrollCollapse: true,
                    paging: true,
                    destroy: true,
                    data: prodjsdata,
                    async: false,
                    fixedColumns: false,
                    searching: true,
                    ordering: true,
                    sorting: false,
                    columns: [
                        { "data": "ID", "autoWidth": true, "visible": false, className: "dt-body-left" },
                        { "data": "Code", "autoWidth": true, className: "dt-body-left" },
                        { "data": "Name", "autoWidth": true, className: "dt-body-left", ordering: true },
                        { "data": "EAN", "autoWidth": true, className: "dt-body-left" },
                        { "data": "MfrID", "autoWidth": true, className: "dt-body-left" },
                        { "data": "BrandID", "autoWidth": true, className: "dt-body-left" },
                        { "data": "CategoryID", "autoWidth": true, className: "dt-body-left" },
                        { "data": "Active", "autoWidth": true, className: "dt-body-center" },
                        {
                            className: "dt-body-center",
                            "mRender": function (data, type, value) {
                                var _action = '<label title="' + value.CDate + '">' + value.CBy + '</label>';
                                return _action;
                            }
                        },
                        {
                            className: "dt-body-center",
                            "mRender": function (data, type, value) {
                                var _action = '<a href="javascript:void(0) style="cursor: pointer;"><span class="glyphicon glyphicon-pencil clsEdit" style="font-size:16px" title="Edit"></span></a>';
                                return _action;
                            },
                            "visible": $("#txtModifyID").val() == 0 ? false : true
                        },
                        {
                            className: "dt-body-center",
                            "mRender": function (data, type, value) {
                                var _action = '<a href="javascript:void(0) style="cursor: pointer;"><span class="glyphicon glyphicon-eye-open clsView" style="font-size:16px" title="View"></span></a>';
                                return _action;
                            },
                            "visible": $("#txtViewID").val() == 0 ? false : true
                        },
                        {
                            className: "dt-body-center",
                            "mRender": function (data, type, value) {
                                var _action = '<a href="javascript:void(0)" class= "clsVariant" style = "font-size:12px" > <span class="glyphicon glyphicon-file clsVariant" style="font-size:12px" title="Variant"></span></a>';
                                return _action;
                            },
                            "visible": $("#txtVariantID").val() == 0 ? false : true
                        },
                    ],
                    initComplete: function () {
                        // Re-apply search value after table is fully initialized
                        this.api().search(searchValue).draw();
                    }
                });
                Table = $('#tblMasterData').DataTable();
            }
        });
    }
    GetData(3);
    GetData(5);
    var arrManuf = [], arrBrand = [], arrCategory = [], arrVendor = [], arrLoc = [],
        arrALManuf = [], arrALBrand = [], arrALCategory = [], arrALVendor = [], arrALLoc = [];
    var nIndexarrManuf = 0, nIndexarrBrand = 0, nIndexarrCategory = 0, nIndexarrLoc = 0;
    var arrCodeData = [], arrNameData = [], arrALCodeData = [], arrALNameData = [], arrTax = [];
    function GetData(nMode, strName = null, IsVariant = false) {
        $.ajax({
            url: Aurl + "productmaster/get",
            type: 'get',
            contentType: 'json',
            data: { Mode: nMode, Name: strName },
            xhrFields: {
                withCredentials: true
            },
            success: function (data) {
                if (nMode == 3)
                {
                    arrCodeData = [], arrNameData = [], arrALNameData = [], arrALCodeData=[];
                    //Table.draw().clear();
                    if (data.length > 0)
                    {
                        $.each(data, function (i, items) {
                            arrCodeData[i] = items.Code;
                            arrNameData[i] = items.Name;
                            var al = {
                                "label": items.Code,
                                "id": items.ID,
                            }
                            arrALCodeData.push(al);
                            al = {
                                "label": items.Name,
                                "id": items.ID,
                            }
                            arrALNameData.push(al);

                        });
                        $("#txtCode").autocomplete({
                            minLength: 0,
                            source: arrALCodeData,
                            //autoFocus: true,
                            //focus: function (event, ui) {
                            //    $("#txtName").val(ui.item.label);
                            //    return false;
                            //},
                            select: function (event, ui) {
                                $("#txtCode").val(ui.item.label);
                                //$("#txtRemarks").val(ui.item.id);
                                return false;
                            },
                        }).autocomplete("instance")._renderItem = function (ul, item) {
                            return $("<li class='each'>")
                                .append("<div class='acItem'><span class='name'>" +
                                    item.label + "</span></div>")
                                .appendTo(ul);
                        };
                        $("#txtName").autocomplete({
                            minLength: 0,
                            source: arrALNameData,
                            //autoFocus: true,
                            //focus: function (event, ui) {
                            //    $("#txtName").val(ui.item.label);
                            //    return false;
                            //},
                            select: function (event, ui) {
                                $("#txtName").val(ui.item.label);
                                //$("#txtRemarks").val(ui.item.id);
                                return false;
                            },
                        }).autocomplete("instance")._renderItem = function (ul, item) {
                            return $("<li class='each'>")
                                .append("<div class='acItem'><span class='name'>" +
                                    item.label + "</span></div>")
                                .appendTo(ul);
                        };
                    }
                    else {
                        showErrorSnackbar("No Records Found");
                    }
                }
                else if (nMode == 4) {
                    $.each(data, function (i, items) {
                        $("#txtID").val(items.ID);
                        if (!IsVariant) {
                            $("#txtCode").val(items.Code),
                                $("#txtName").val(items.Name),
                                $("#txtEAN").val(items.EAN);
                        }
                            $("#txtMfr").val(items.MfrID),
                            $("#txtBrand").val(items.BrandID),
                            $("#txtCategory").val(items.CategoryID),
                            $("#txtHSN").val(items.HSNCode),
                            //$("#txtProdDisc").val(items.ProductDiscPerc),
                            $("#cmbBaseUOM").val(items.BaseUomID),
                            //$("#txtBaseCR").val(items.BaseCR),
                            $("#cmbPurchaseUOM").val(items.PurchaseUomID),
                            //$("#txtPurchaseCR").val(items.PurchaseCR),
                            $("#cmbSalesUOM").val(items.SalesUomID),
                            //$("#txtSalesCR").val(items.SalesCR),
                            $("#cmbReportingUOM").val(items.ReportingUomID),
                            //$("#txtReportingCR").val(items.ReportingCR),
                            $("#cmbPTax").val(items.PurchaseTaxID),
                            $("#cmbSTax").val(items.SalesTaxID),
                            $("#chkTrackInv").prop("checked", items.TrackInventory == "True");
                            $("#chkTrackInv").prop("disabled", false);
                            $("#chkTrackBatch").prop("checked", items.TrackBatch == "True");
                            $("#chkTrackSerial").prop("checked", items.TrackSerial == "True");
                            $("#chkTrackPKD").prop("checked", items.TrackPDK == "True");
                            $("#rdoDMY").prop("checked", items.DateFormat == "1");
                            $("#cmbBarUOM").val(items.BarcodeUomID),
                            $("#cmbBarPrice").val(items.BarcodePriceID),
                            $("#txtVendor").val(items.VendorID),
                            $("#txtMOH").val(items.MOH),
                            $("#txtMOQ").val(items.MOQ),
                            $("#txtRemarks").val(items.Remarks),
                            $("#txtLocation").val(items.LocationID),
                            $("#chkActive").prop("checked", items.Active == "True");

                        $("#chkBarcodePrint").prop("checked", items.BarcodePrint == "True");
                        var Bchk = $("#chkBarcodePrint").is(":checked");
                        $("#cmbBarUOM,#cmbBarPrice").prop("disabled", !Bchk);
                        $("#txtWebOrder").val(items.Weborder);


                        $("#chkApplySalesPerc").prop("checked", items.SaleonMRP == "True");
                        $("#chkApplyECPPerc").prop("checked", items.ECPonMRP == "True");
                        $("#chkApplySPLPerc").prop("checked", items.SPLonMRP == "True");
                        $('#cmbLifeTime').val(items.ProdLifeTime);

                        updateInputColumn("txtBaseCR", items.BaseCR); updateInputColumn("txtPurchaseCR", items.PurchaseCR);
                        updateInputColumn("txtSalesCR", items.SalesCR); updateInputColumn("txtReportingCR", items.ReportingCR);
                        updateInputColumn("txtPurPrice", items.PurchasePrice); updateInputColumn("txtSPrice", items.SalesPrice);
                        updateInputColumn("txtECPrice", items.ECP); updateInputColumn("txtSPLPrice", items.SPLPrice);
                        updateInputColumn("txtMRP", items.MRP); updateInputColumn("txtRTNPrice", items.ReturnPrice);
                        updateInputColumn("txtProdDisc", items.ProductDiscPerc);

                        updateInputColumn("txtSPricePerc", items.SaleonpPern); updateInputColumn("txtECPricePerc", items.ECPonpPern);
                        updateInputColumn("txtSPLPricePerc", items.SPLonpPern);

                        updateInputColumn("txtPurBillPrice", items.PurchaseBillPrice); updateInputColumn("txtPurRtnPrice", items.PurchaseReturnPrice);
                        updateInputColumn("txtInvoicePrice", items.InvoicePrice); updateInputColumn("txtSaleRtnPrice", items.SalesReturnPrice);

                        if (IsVariant) {
                            $("#chkTrackInv,#chkTrackBatch,#chkTrackPKD").prop("disabled", false);
                        } else {
                            $("#chkTrackInv").prop("disabled", parseInt(items.ProdInvCount) > 0);
                            $("#chkTrackBatch").prop("disabled", parseInt(items.ProdBatCount) > 0);
                            $("#chkTrackPKD").prop("disabled", parseInt(items.ProdPkdCount) > 0);
                        }
                        CalulatePurchaseTax();
                        CalulateSalesTax(0);
                        setTimeout(function () {
                            CalculateMarginPern(items.PurchasePrice);
                        }, 1000);
                        setTimeout(function () {
                            CalculateRetailMarginPern(items.MRP);
                        }, 1000);
                        updateInputColumn("txtPrice", 0);
                        $('#cmbPriceUOM').find("option").remove();
                        $('#cmbPriceUOM').append($('<option/>', {
                            value: 0,
                            text: "-- Select --",
                            name: 1
                        }));
                        //var MRP = document.getElementById("txtMRP").getAttribute("txttag");
                        //var exclpp = document.getElementById("txtPurPrice").getAttribute("txttag");
                        //var SalePerc = document.getElementById("txtSPricePerc").getAttribute("txttag");
                        //var ECPPerc = document.getElementById("txtECPricePerc").getAttribute("txttag");
                        //var SPLPerc = document.getElementById("txtSPLPricePerc").getAttribute("txttag");
                        //ApplySalesonPercValue(SalePerc, "txtSPricePerc", MRP, exclpp);
                        //ApplyECPonPercValue(ECPPerc, "txtECPricePerc", MRP, exclpp);
                        //ApplySPLonPercValue(SPLPerc, "txtSPLPricePerc", MRP, exclpp);
                    });
                }
                else if (nMode == 5) {
                    $('#cmbBaseUOM,#cmbPurchaseUOM,#cmbSalesUOM,#cmbReportingUOM,#cmbBarUOM,#cmbPTax,#cmbSTax,#cmbBarPrice,#cmbLifeTime').find("option").remove();
                    $('#cmbBaseUOM,#cmbPurchaseUOM,#cmbSalesUOM,#cmbReportingUOM,#cmbBarUOM,#cmbPTax,#cmbSTax,#cmbBarPrice,#cmbLifeTime').append($('<option/>', {
                        value: 0,
                        text: "-- Select --",
                    }));
                    arrManuf = [], arrBrand = [], arrCategory = [], arrVendor = [], arrLoc = [], arrTax = [];
                    nIndexarrManuf = 0, nIndexarrBrand = 0, nIndexarrCategory = 0, nIndexarrVendor = 0, nIndexarrLoc = 0;
                    $.each(data, function (i, items) {
                        if (items.FType == 1) {
                            var al = {
                                "label": items.Name,
                            }
                            arrALManuf.push(al);
                            arrManuf[nIndexarrManuf] = items.Name;
                            nIndexarrManuf++;
                        }
                        if (items.FType == 2) {
                            var al = {
                                "label": items.Name,
                            }
                            arrALBrand.push(al);
                            arrBrand[nIndexarrBrand] = items.Name;
                            nIndexarrBrand++;
                        }
                        if (items.FType == 3) {
                            var al = {
                                "label": items.Name,
                            }
                            arrALCategory.push(al);
                            arrCategory[nIndexarrCategory] = items.Name;
                            nIndexarrCategory++;
                        }
                        if (items.FType == 7) {
                            var al = {
                                "label": items.Name,
                            }
                            arrALVendor.push(al);
                            arrVendor[nIndexarrVendor] = items.Name;
                            nIndexarrVendor++;
                        }
                        if (items.FType == 8) {
                            var al = {
                                "label": items.Name,
                            }
                            arrALLoc.push(al);
                            arrLoc[nIndexarrLoc] = items.Name;
                            nIndexarrLoc++;
                        }
                        if (items.FType == 4) {
                            $('#cmbBaseUOM,#cmbPurchaseUOM,#cmbSalesUOM,#cmbReportingUOM,#cmbBarUOM').append($('<option/>', {
                                value: items.ID,
                                text: items.Name,
                            }));
                        }
                        if (items.FType == 5) {
                            var al = {
                                "TaxName": items.Name,
                                "TaxID": items.ID,
                                "TaxPern": items.TaxTypeID,
                            }
                            arrTax.push(al);
                            $('#cmbPTax,#cmbSTax').append($('<option/>', {
                                value: items.ID,
                                text: items.Name,
                            }));
                        }
                        if (items.FType == 6) {
                            $('#cmbBarPrice').append($('<option/>', {
                                value: items.ID,
                                text: items.Name,
                            }));
                        }
                        if (items.FType == 9) {
                            $('#cmbLifeTime').append($('<option/>', {
                                value: items.ID,
                                text: items.Name,
                            }));
                        }
                    });
                    SetAutlistforFields();
                }
            }, error: function (data) {
                if (data.status == "401") {
                    var msg = data.responseJSON.Message;
                    //showErrorSnackbar(msg + " Logout and Login again.");
                }
            }

        });
    }
    $("#btnPriceDetails").click(function (e) {
        var items = $('#cmbPriceUOM').find("option");
        //if (items.length == 1)
        {
            $('#cmbPriceUOM').find("option").remove();
            $('#cmbPriceUOM').append($('<option/>', {
                value: 0,
                text: "-- Select --",
                name: 1
            }));
            //var BaseQty = parseFloat(document.getElementById("txtBaseCR").getAttribute("txttag")).toFixed(DecVal);
            //var BaseUOM = $('#cmbBaseUOM option:selected').text() + "(" + BaseQty + ")" + " - Base";
            //$('#cmbPriceUOM').append($('<option/>', {
            //    value: 1,
            //    text: BaseUOM ,
            //    name: BaseQty
            //}));
            var PurQty = parseFloat(document.getElementById("txtPurchaseCR").getAttribute("txttag")).toFixed(DecVal);
            var PurUOM = $('#cmbPurchaseUOM option:selected').text() + "(" + PurQty + ")" + " - Purchase";
            $('#cmbPriceUOM').append($('<option/>', {
                value: 2,
                text: PurUOM,
                name: PurQty
            }));
            //var SaleQty = parseFloat(document.getElementById("txtSalesCR").getAttribute("txttag")).toFixed(DecVal);
            //var SaleUOM = $('#cmbSalesUOM option:selected').text() + "(" + SaleQty + ")" + " - Sale";
            //$('#cmbPriceUOM').append($('<option/>', {
            //    value: 3,
            //    text: SaleUOM,
            //    name: SaleQty
            //}));
        }

    });
    $("#cmbPriceUOM").change(function (e) {
        var BaseQty = document.getElementById("txtBaseCR").getAttribute("txttag");
        var PurQty = document.getElementById("txtPurchaseCR").getAttribute("txttag");
        var SaleQty = document.getElementById("txtSalesCR").getAttribute("txttag");
        var selval = e.target.value;
        var CFValue = selval == 1 ? BaseQty : selval == 2 ? PurQty : selval == 3 ? SaleQty : 1;// $('option:selected', this).attr('name');
        var Price = document.getElementById("txtPrice").getAttribute("txttag");
        var Purchase = Price / CFValue;
        updateInputColumn("txtPurPrice", Purchase);
        //CalculateMarginPern(Purchase);
        CalcPurchaseTaxKeyup("txtPurPrice", Purchase);
        //showErrorSnackbar(CFValue);
        var MRP = document.getElementById("txtMRP").getAttribute("txttag");
        CalculateRetailMarginPern(MRP);
    });
    $("#txtPrice").change(function (e) {
        var val = e.target.value;
        updateInputColumn("txtPrice", val);

        var TID = $("#cmbPTax").val();
        var tx = arrTax.filter(a => a.TaxID == TID);
        var taxpern = 1;
        if (tx.length > 0)
            taxpern = (parseFloat(tx[0].TaxPern) / 100) + 1;

        var InclPrice = parseFloat(val) * taxpern;

        updateInputColumn("txtPriceIncl", InclPrice);

        var BaseQty = document.getElementById("txtBaseCR").getAttribute("txttag");
        var PurQty = document.getElementById("txtPurchaseCR").getAttribute("txttag");
        var SaleQty = document.getElementById("txtSalesCR").getAttribute("txttag");
        var selval = $("#cmbPriceUOM").val();
        var CFValue = selval == 1 ? BaseQty : selval == 2 ? PurQty : selval == 3 ? SaleQty : 1;// $('option:selected', this).attr('name');
        var Purchase = val / CFValue;
        updateInputColumn("txtPurPrice", Purchase);
        //CalculateMarginPern(Purchase);
        CalcPurchaseTaxKeyup("txtPurPrice", Purchase);
        var MRP = document.getElementById("txtMRP").getAttribute("txttag");
        CalculateRetailMarginPern(MRP);
    });
    $("#txtPriceIncl").change(function (e) {
        var val = e.target.value;
        updateInputColumn("txtPriceIncl", val);
        var TID = $("#cmbPTax").val();
        var tx = arrTax.filter(a => a.TaxID == TID);
        var taxpern = 1;
        if (tx.length > 0)
            taxpern = (parseFloat(tx[0].TaxPern) / 100) + 1;

        var ExclPrice = parseFloat(val) / taxpern;

        updateInputColumn("txtPrice", ExclPrice);

        var BaseQty = document.getElementById("txtBaseCR").getAttribute("txttag");
        var PurQty = document.getElementById("txtPurchaseCR").getAttribute("txttag");
        var SaleQty = document.getElementById("txtSalesCR").getAttribute("txttag");
        var selval = $("#cmbPriceUOM").val();
        var CFValue = selval == 1 ? BaseQty : selval == 2 ? PurQty : selval == 3 ? SaleQty : 1;// $('option:selected', this).attr('name');

        var Purchase = ExclPrice / CFValue;
        updateInputColumn("txtPurPrice", Purchase);
        //CalculateMarginPern(Purchase);
        CalcPurchaseTaxKeyup("txtPurPrice", Purchase);
        var MRP = document.getElementById("txtMRP").getAttribute("txttag");
        CalculateRetailMarginPern(MRP);
    });
    $("#cmbPTax").change(function (e) {
        var TID = e.target.value;
        var tx = arrTax.filter(a => a.TaxID == TID);
        if (tx.length > 0)
            $("#txtPTaxPern").val(tx[0].TaxPern);
        else
            $("#txtPTaxPern").val(0);
        CalulatePurchaseTax();
        var exclpp = document.getElementById("txtPurPrice").getAttribute("txttag");
        CalculateMarginPern(exclpp);
        var MRP = document.getElementById("txtMRP").getAttribute("txttag");
        CalculateRetailMarginPern(MRP);
    })
    $("#cmbSTax").change(function (e) {
        var TID = e.target.value;
        var tx = arrTax.filter(a => a.TaxID == TID);
        if (tx.length > 0)
            $("#txtSTaxPern").val(tx[0].TaxPern);
        else
            $("#txtSTaxPern").val(0);
        CalulateSalesTax();

        var MRP = document.getElementById("txtMRP").getAttribute("txttag");
        var exclpp = document.getElementById("txtPurPrice").getAttribute("txttag");
        var SalePerc = document.getElementById("txtSPricePerc").getAttribute("txttag");
        var ECPPerc = document.getElementById("txtECPricePerc").getAttribute("txttag");
        var SPLPerc = document.getElementById("txtSPLPricePerc").getAttribute("txttag");
        ApplySalesonPercValue(SalePerc, "txtSPricePerc", MRP, exclpp);
        ApplyECPonPercValue(ECPPerc, "txtECPricePerc", MRP, exclpp);
        ApplySPLonPercValue(SPLPerc, "txtSPLPricePerc", MRP, exclpp);
        CalculateMarginPern(exclpp);
        CalculateRetailMarginPern(MRP);
    })
    var DecVal = '@Session["DecimalValues"]';
    function updateLabelColumn(labelID, netValue) {
        //const label = document.getElementById(`dgvProdGross${rowId}`);
        const label = document.getElementById(labelID);
        label.setAttribute('lbltag', netValue.toFixed(4));
        label.innerText = netValue.toFixed(DecVal);
        label.title = netValue.toFixed(4);
    }
function updateInputColumn(inputID, netValue) {
    //const label = document.getElementById(`dgvProdGross${rowId}`);
    const input = document.getElementById(inputID);
    var value = netValue != "" ? netValue : 0;
    input.setAttribute('txttag', parseFloat(value).toFixed(4));
    input.value = parseFloat(value).toFixed(DecVal);
    input.title = netValue;
}
    $(".txtsettag").focusin(function (e) {
        var id = e.target.id;
        const val = document.getElementById(id).getAttribute("txttag");
        $("#" + id).val(val);
        $("#" + id).select();
    });
    $(".txtsettag").blur(function (e) {
        var val = e.target.value;
        var id = e.target.id;
        updateInputColumn(id, val);
    });
    $(".txtPurchasetaxExcl").keyup(function (e) {
        var val = e.target.value;
        var id = e.target.id;
        CalcPurchaseTaxKeyup(id, val);
    });
    function CalcPurchaseTaxKeyup(id, val) {
        if ($("#cmbPTax").val() > 0) {
            var txpern = $("#txtPTaxPern").val();
            var incl = parseFloat(val) + parseFloat((val * txpern) / 100);
            //$("#txtPurPrice").val(incl);
            updateInputColumn(id + "Incl", incl);
        } else {
            $("#cmbPTax").focus();
            updateInputColumn(id, 0);
            updateInputColumn(id + "Incl", 0);
            showErrorSnackbar("Select Purchase Tax");
        }
        var MRP = document.getElementById("txtMRP").getAttribute("txttag");
        var exclpp = val;
        var SalePerc = document.getElementById("txtSPricePerc").getAttribute("txttag");
        var ECPPerc = document.getElementById("txtECPricePerc").getAttribute("txttag");
        var SPLPerc = document.getElementById("txtSPLPricePerc").getAttribute("txttag");
        ApplySalesonPercValue(SalePerc, "txtSPricePerc", MRP, exclpp);
        ApplyECPonPercValue(ECPPerc, "txtECPricePerc", MRP, exclpp);
        ApplySPLonPercValue(SPLPerc, "txtSPLPricePerc", MRP, exclpp);
        CalculateMarginPern(exclpp);
        setTimeout(() => {
            CalculateRetailMarginPern(MRP);
        }, 500);
    }
    $(".txtPurchasetaxIncl").keyup(function (e) {
        var val = e.target.value;
        var id = e.target.id;
        if ($("#cmbPTax").val() > 0) {
            var txpern = $("#txtPTaxPern").val();
            var excl = parseFloat(val) / parseFloat(1 + (txpern / 100));
            //$("#txtPurPrice").val(incl);
            var exid = id.substring(0, id.length - 4);
            updateInputColumn(exid, excl);
        } else {
            $("#cmbPTax").focus();
            updateInputColumn(id, 0);
            updateInputColumn(id + "Incl", 0);
            showErrorSnackbar("Select Purchase Tax");
        }
        var MRP = document.getElementById("txtMRP").getAttribute("txttag");
        var exclpp = document.getElementById("txtPurPrice").getAttribute("txttag");
        var SalePerc = document.getElementById("txtSPricePerc").getAttribute("txttag");
        var ECPPerc = document.getElementById("txtECPricePerc").getAttribute("txttag");
        var SPLPerc = document.getElementById("txtSPLPricePerc").getAttribute("txttag");
        ApplySalesonPercValue(SalePerc, "txtSPricePerc", MRP, exclpp);
        ApplyECPonPercValue(ECPPerc, "txtECPricePerc", MRP, exclpp);
        ApplySPLonPercValue(SPLPerc, "txtSPLPricePerc", MRP, exclpp);
        CalculateMarginPern(exclpp);
        setTimeout(() => {
            CalculateRetailMarginPern(MRP);
        }, 500);
    });
    function CalulatePurchaseTax() {
        var TID = $("#cmbPTax").val();
        var tx = arrTax.filter(a => a.TaxID == TID);
        if (tx.length > 0)
            $("#txtPTaxPern").val(tx[0].TaxPern);
        else
            $("#txtPTaxPern").val(0);
        var inputs = $(".txtPurchasetaxExcl");
        for (var i = 0; i < inputs.length; i++) {
            var field = $(inputs[i]);
            var FID = field[0].id;
            var txpern = $("#txtPTaxPern").val();
            const val = document.getElementById(FID).getAttribute("txttag");
            var incl = parseFloat(val) + parseFloat((val * txpern) / 100);
            //$("#txtPurPrice").val(incl);
            updateInputColumn(FID + "Incl", incl);
        }
        var exclpp = document.getElementById("txtPurPrice").getAttribute("txttag");
        CalculateMarginPern(exclpp);
        setTimeout(() => {
            var MRP = document.getElementById("txtMRP").getAttribute("txttag");
            CalculateRetailMarginPern(MRP);
        }, 500);
    }
    function CalulateSalesTax(TriggKeyup = 1) {
        var TID = $("#cmbSTax").val();
        var tx = arrTax.filter(a => a.TaxID == TID);
        if (tx.length > 0)
            $("#txtSTaxPern").val(tx[0].TaxPern);
        else
            $("#txtSTaxPern").val(0);

        var pprice = document.getElementById("txtPurPrice").getAttribute("txttag");

        var inputs = $(".txtsaletaxExcl");
        for (var i = 0; i < inputs.length; i++) {
            var field = $(inputs[i]);
            var FID = field[0].id;
            var txpern = $("#txtSTaxPern").val();
            const val = document.getElementById(FID).getAttribute("txttag");
            var incl = parseFloat(val) + parseFloat((val * txpern) / 100);
            //$("#txtPurPrice").val(incl);
            updateInputColumn(FID + "Incl", incl);
        }
        //if (TriggKeyup == 1)
        //$("#txtSPricePerc").keyup();
        CalculateMarginPern(pprice);
        setTimeout(() => {
            var MRP = document.getElementById("txtMRP").getAttribute("txttag");
            CalculateRetailMarginPern(MRP);
        }, 500)
    }
    function SetTagZero() {
        var inputs = $(".txtsettag");
        for (var i = 0; i < inputs.length; i++) {
            var field = $(inputs[i]);
            var FID = field[0].id;
            updateInputColumn(FID, "0");
        }
    }

    $("#txtMRP").keyup(function (e) {
        var MRP = e.target.value;
        var exclpp = document.getElementById("txtPurPrice").getAttribute("txttag");
        var SalePerc = document.getElementById("txtSPricePerc").getAttribute("txttag");
        var ECPPerc = document.getElementById("txtECPricePerc").getAttribute("txttag");
        var SPLPerc = document.getElementById("txtSPLPricePerc").getAttribute("txttag");
        ApplySalesonPercValue(SalePerc, "txtSPricePerc", MRP, exclpp);
        ApplyECPonPercValue(ECPPerc, "txtECPricePerc", MRP, exclpp);
        ApplySPLonPercValue(SPLPerc, "txtSPLPricePerc", MRP, exclpp);
        CalculateMarginPern(exclpp);
        setTimeout(() => {
            CalculateRetailMarginPern(MRP);
        }, 500)

    });
    //Sale apply
    $("#txtSPricePerc").keyup(function (e) {
        var val = e.target.value;
        var id = e.target.id;
        var MRP = parseFloat(document.getElementById("txtMRP").getAttribute("txttag"));
        var exclpp = document.getElementById("txtPurPrice").getAttribute("txttag");
        ApplySalesonPercValue(val, id, MRP, exclpp);
    });
    function ApplySalesonPercValue(dValue, nFieldID, dMRP,dExclPPrice) {
        var isChk = $("#chkApplySalesPerc").is(":checked");
        var val = parseFloat(dValue);
        var id = nFieldID;
        if ($("#cmbSTax").val() > 0) {
            if (!isChk) {
                var exclprice = dExclPPrice;// document.getElementById("txtPurPrice").getAttribute("txttag");
                var perc = val > 0 ? (parseFloat(val) / 100) + 1 : 0;
                var aftpercapply = exclprice * perc;

                var txpern = $("#txtSTaxPern").val();
                var tp = (txpern / 100) + 1;
                //var incl = parseFloat(aftpercapply) +parseFloat((val * txpern) / 100);//
                var incl = parseFloat(aftpercapply * tp);
                //$("#txtPurPrice").val(incl);
                updateInputColumn("txtSPrice", aftpercapply);
                updateInputColumn("txtSPriceIncl", incl);
                //updateInputColumn(id, val);
            }
            else {
                var MRP = parseFloat(dMRP);// parseFloat(document.getElementById("txtMRP").getAttribute("txttag"));
                var txpern = $("#txtSTaxPern").val();
                var tp = (parseFloat(txpern) / 100) + 1;
                if (val < parseFloat(100))
                {

                    var SalePerc = parseFloat(val);// document.getElementById("txtSPricePerc").getAttribute("txttag");
                    var aftpercapply = SalePerc > 0 ? (MRP - ((MRP * SalePerc) / 100)) : 0; //MRP / perc;
                    updateInputColumn("txtSPriceIncl", aftpercapply);
                    var excl = parseFloat(aftpercapply) / tp;
                    updateInputColumn("txtSPrice", excl);
                    //updateInputColumn(id, val);
                }
                else {
                    updateInputColumn("txtSPricePerc", 0);
                    updateInputColumn("txtSPriceIncl", MRP);
                    var excl = parseFloat(MRP) / tp;
                    updateInputColumn("txtSPrice", excl);
                    showErrorSnackbar("When on MRP Check, Percentage(%) should be less than 100 only");
                }
            }

        } else {
            $("#cmbSTax").focus();
            //updateInputColumn(id, val);
            updateInputColumn("txtSPrice", 0);
            updateInputColumn("txtSPriceIncl", 0);
            showErrorSnackbar("Select Sales Tax");
        }
        CalculateMarginPern(dExclPPrice);
        setTimeout(() => {
            var MRP = document.getElementById("txtMRP").getAttribute("txttag");
            CalculateRetailMarginPern(MRP);
        }, 500)
    }
    $("#chkApplySalesPerc").click(function (e) {
        var isChk = $("#chkApplySalesPerc").is(":checked");
        var exclprice = document.getElementById("txtPurPrice").getAttribute("txttag");
        if (isChk) {
            var MRP = parseFloat(document.getElementById("txtMRP").getAttribute("txttag"));
            var txpern = $("#txtSTaxPern").val();
            var tp = (parseFloat(txpern) / 100) + 1;
            var SalePerc = parseFloat(document.getElementById("txtSPricePerc").getAttribute("txttag"));
            if (SalePerc < 100) {
                var perc = (parseFloat(SalePerc) / 100) + 1;
                //var aftpercapply = MRP / perc;
                var aftpercapply = (MRP - ((MRP * SalePerc) / 100));
                updateInputColumn("txtSPriceIncl", aftpercapply);
                var excl = parseFloat(aftpercapply) / tp;
                updateInputColumn("txtSPrice", excl);
            } else {
                updateInputColumn("txtSPricePerc", 0);
                updateInputColumn("txtSPriceIncl", MRP);
                var excl = parseFloat(MRP) / tp;
                updateInputColumn("txtSPrice", excl);
                showErrorSnackbar("When on MRP Check, Percentage(%) should be less than 100 only");
            }

        } else {

            var SalePerc = document.getElementById("txtSPricePerc").getAttribute("txttag");
            var perc = SalePerc > 0 ? (parseFloat(SalePerc) / 100) + 1 : 0;
            var aftpercapply = exclprice * perc;

            var txpern = $("#txtSTaxPern").val();
            var incl = SalePerc > 0 ? parseFloat(aftpercapply) + parseFloat((exclprice * txpern) / 100) : 0;
            //$("#txtPurPrice").val(incl);
            updateInputColumn("txtSPrice", aftpercapply);
            updateInputColumn("txtSPriceIncl", incl);
            //updateInputColumn(id, val);
        }
        CalculateMarginPern(exclprice);
        setTimeout(() => {
            var MRP = document.getElementById("txtMRP").getAttribute("txttag");
            CalculateRetailMarginPern(MRP);
        }, 500)
    });
    //ecp apply
    $("#txtECPricePerc").keyup(function (e) {
        var val = e.target.value;
        var id = e.target.id;
        var MRP = parseFloat(document.getElementById("txtMRP").getAttribute("txttag"));
        var exclpp = document.getElementById("txtPurPrice").getAttribute("txttag");
        ApplyECPonPercValue(val, id, MRP, exclpp);
    });
    function ApplyECPonPercValue(dValue, nFieldID, dMRP, dExclPPrice) {
        var isChk = $("#chkApplyECPPerc").is(":checked");
        var val = dValue;// e.target.value;
        var id = nFieldID;// e.target.id;
        if ($("#cmbSTax").val() > 0) {
            if (!isChk) {
                var exclprice = dExclPPrice;// document.getElementById("txtPurPrice").getAttribute("txttag");
                var perc = val > 0 ? (parseFloat(val) / 100) + 1 : 0;
                var aftpercapply = exclprice * perc;

                var txpern = parseFloat($("#txtSTaxPern").val());
                var tp = (txpern / 100) + 1;
                //var incl = parseFloat(aftpercapply) +parseFloat((val * txpern) / 100);//
                var incl = parseFloat(aftpercapply * tp);
                //$("#txtPurPrice").val(incl);
                updateInputColumn("txtECPrice", aftpercapply);
                updateInputColumn("txtECPriceIncl", incl);
                //updateInputColumn(id, val);
            } else {
                var MRP = parseFloat(dMRP);
                var txpern = $("#txtSTaxPern").val();
                var tp = (parseFloat(txpern) / 100) + 1;
                if (val < parseFloat(100)) {
                    var SalePerc = parseFloat(val);// document.getElementById("txtSPricePerc").getAttribute("txttag");
                    var perc = SalePerc > 0 ? (parseFloat(SalePerc) / 100) + 1 : 0;
                    //var aftpercapply = MRP / perc;
                    var aftpercapply = SalePerc > 0 ? (MRP - ((MRP * SalePerc) / 100)) : 0;
                    updateInputColumn("txtECPriceIncl", aftpercapply);
                    var excl = parseFloat(aftpercapply) / tp;
                    updateInputColumn("txtECPrice", excl);
                    //updateInputColumn(id, val);
                }
                else {
                    updateInputColumn("txtECPricePerc", 0);
                    updateInputColumn("txtECPriceIncl", MRP);
                    var excl = parseFloat(MRP) / tp;
                    updateInputColumn("txtECPrice", excl);
                    showErrorSnackbar("When on MRP Check, Percentage(%) should be less than 100 only");
                }
            }
        } else {
            $("#cmbSTax").focus();
            //updateInputColumn(id, val);
            updateInputColumn("txtECPrice", 0);
            updateInputColumn("txtECPriceIncl", 0);
            showErrorSnackbar("Select Sales Tax");
        }
        CalculateMarginPern(dExclPPrice);
        setTimeout(() => {
            var MRP = document.getElementById("txtMRP").getAttribute("txttag");
            CalculateRetailMarginPern(MRP);
        }, 500)
    }
    $("#chkApplyECPPerc").click(function (e) {
        var isChk = $("#chkApplyECPPerc").is(":checked");
        var exclprice = document.getElementById("txtPurPrice").getAttribute("txttag");
        if (isChk) {
            var MRP = parseFloat(document.getElementById("txtMRP").getAttribute("txttag"));
            var txpern = $("#txtSTaxPern").val();
            var tp = (parseFloat(txpern) / 100) + 1;

            var SalePerc = parseFloat(document.getElementById("txtECPricePerc").getAttribute("txttag"));
            if (SalePerc < 100) {
                var perc = (parseFloat(SalePerc) / 100) + 1;
                //var aftpercapply = MRP / perc;
                var aftpercapply = (MRP - ((MRP * SalePerc) / 100));
                updateInputColumn("txtECPriceIncl", aftpercapply);
                var excl = parseFloat(aftpercapply) / tp;
                updateInputColumn("txtECPrice", excl);
            } else {
                updateInputColumn("txtECPricePerc", 0);
                updateInputColumn("txtECPriceIncl", MRP);
                var excl = parseFloat(MRP) / tp;
                updateInputColumn("txtECPrice", excl);
                showErrorSnackbar("When on MRP Check, Percentage(%) should be less than 100 only");
            }

        } else {

            var SalePerc = document.getElementById("txtECPricePerc").getAttribute("txttag");
            var perc = SalePerc > 0 ? (parseFloat(SalePerc) / 100) + 1 : 0;
            var aftpercapply = exclprice * perc;

            var txpern = $("#txtSTaxPern").val();
            var incl = SalePerc > 0 ?parseFloat(aftpercapply) + parseFloat((exclprice * txpern) / 100) : 0;
            //$("#txtPurPrice").val(incl);
            updateInputColumn("txtECPrice", aftpercapply);
            updateInputColumn("txtECPriceIncl", incl);
            //updateInputColumn(id, val);
        }
        CalculateMarginPern(exclprice);
        setTimeout(() => {
            var MRP = document.getElementById("txtMRP").getAttribute("txttag");
            CalculateRetailMarginPern(MRP);
        }, 500)
    });

    // SPL Apply
    $("#txtSPLPricePerc").keyup(function (e) {
        var val = e.target.value;
        var id = e.target.id;
        var MRP = parseFloat(document.getElementById("txtMRP").getAttribute("txttag"));
        var exclpp = document.getElementById("txtPurPrice").getAttribute("txttag");
        ApplySPLonPercValue(val, id, MRP, exclpp);
    });
    function ApplySPLonPercValue(dValue, nFieldID, dMRP, dExclPPrice) {
        var isChk = $("#chkApplySPLPerc").is(":checked");
        var val = dValue;// e.target.value;
        var id = nFieldID;// e.target.id;
        if ($("#cmbSTax").val() > 0) {
            if (!isChk) {
                var exclprice = dExclPPrice;// document.getElementById("txtPurPrice").getAttribute("txttag");
                var perc = val > 0 ? (parseFloat(val) / 100) + 1 : 0;
                var aftpercapply = exclprice * perc;

                var txpern = $("#txtSTaxPern").val();
                var tp = (txpern / 100) + 1;
                //var incl = parseFloat(aftpercapply) +parseFloat((val * txpern) / 100);//
                var incl = parseFloat(aftpercapply * tp);
                //$("#txtPurPrice").val(incl);
                updateInputColumn("txtSPLPrice", aftpercapply);
                updateInputColumn("txtSPLPriceIncl", incl);
                //updateInputColumn(id, val);
            } else {
                var MRP = parseFloat(dMRP);// parseFloat(document.getElementById("txtMRP").getAttribute("txttag"));
                var txpern = $("#txtSTaxPern").val();
                var tp = (parseFloat(txpern) / 100) + 1;
                if (val < parseFloat(100)) {
                    var SalePerc = parseFloat(val);// document.getElementById("txtSPricePerc").getAttribute("txttag");
                    var perc = (parseFloat(SalePerc) / 100) + 1;
                    var aftpercapply = (MRP - ((MRP * SalePerc) / 100));
                    //var aftpercapply = MRP / perc;
                    updateInputColumn("txtSPLPriceIncl", aftpercapply);
                    var excl = parseFloat(aftpercapply) / tp;
                    updateInputColumn("txtSPLPrice", excl);
                    //updateInputColumn(id, val);
                }
                else {
                    updateInputColumn("txtSPLPricePerc", 0);
                    updateInputColumn("txtSPLPriceIncl", MRP);
                    var excl = parseFloat(MRP) / tp;
                    updateInputColumn("txtSPLPrice", excl);
                    showErrorSnackbar("When on MRP Check, Percentage(%) should be less than 100 only");
                }
            }

        } else {
            $("#cmbSTax").focus();
            //updateInputColumn(id, val);
            updateInputColumn("txtSPLPrice", 0);
            updateInputColumn("txtSPLPriceIncl", 0);
            showErrorSnackbar("Select Sales Tax");
        }
        CalculateMarginPern(dExclPPrice);
        setTimeout(() => {
            var MRP = document.getElementById("txtMRP").getAttribute("txttag");
            CalculateRetailMarginPern(MRP);
        }, 500)
    }
    $("#chkApplySPLPerc").click(function (e) {
        var isChk = $("#chkApplySPLPerc").is(":checked");
        var exclprice = document.getElementById("txtPurPrice").getAttribute("txttag");
        if (isChk) {
            var MRP = parseFloat(document.getElementById("txtMRP").getAttribute("txttag"));
            var txpern = $("#txtSTaxPern").val();
            var tp = (parseFloat(txpern) / 100) + 1;

            var SalePerc = parseFloat(document.getElementById("txtSPLPricePerc").getAttribute("txttag"));
            if (SalePerc < 100) {
                //var perc = (parseFloat(SalePerc) / 100) + 1;
                //var aftpercapply = MRP / perc;
                var aftpercapply = (MRP - ((MRP * SalePerc) / 100));
                updateInputColumn("txtSPLPriceIncl", aftpercapply);
                var excl = parseFloat(aftpercapply) / tp;
                updateInputColumn("txtSPLPrice", excl);
            }
            else
            {
                updateInputColumn("txtSPLPricePerc", 0);
                updateInputColumn("txtSPLPriceIncl", MRP);
                var excl = parseFloat(MRP) / tp;
                updateInputColumn("txtSPLPrice", excl);
                showErrorSnackbar("When on MRP Check, Percentage(%) should be less than 100 only");
            }
        } else {

            var SalePerc = document.getElementById("txtSPLPricePerc").getAttribute("txttag");
            var perc = SalePerc > 0 ? (parseFloat(SalePerc) / 100) + 1 : 0;
            var aftpercapply = exclprice * perc;

            var txpern = $("#txtSTaxPern").val();
            var incl = SalePerc > 0 ?parseFloat(aftpercapply) + parseFloat((exclprice * txpern) / 100) : 0;
            //$("#txtPurPrice").val(incl);
            updateInputColumn("txtSPLPrice", aftpercapply);
            updateInputColumn("txtSPLPriceIncl", incl);
            //updateInputColumn(id, val);
        }
        CalculateMarginPern(exclprice);
        setTimeout(() => {
            var MRP = document.getElementById("txtMRP").getAttribute("txttag");
            CalculateRetailMarginPern(MRP);
        }, 500)
    });

    $(".txtsaletaxExcl").keyup(function (e) {
        var val = e.target.value;
        var id = e.target.id;
        if ($("#cmbSTax").val() > 0) {
            var txpern = $("#txtSTaxPern").val();
            var incl = parseFloat(val) + parseFloat((val * txpern) / 100);
            //$("#txtPurPrice").val(incl);
            //updateInputColumn(id, val);
            updateInputColumn(id + "Incl", incl);
        } else {
            $("#cmbSTax").focus();
            updateInputColumn(id, 0);
            updateInputColumn(id + "Incl", 0);
            showErrorSnackbar("Select Sales Tax");
        }
        var exclprice = document.getElementById("txtPurPrice").getAttribute("txttag");
        //CalculateMarginPern(exclprice);
        CalculateMarginPernforSaleECPSPLExcl(exclprice, id, val);
        setTimeout(() => {
            var MRP = document.getElementById("txtMRP").getAttribute("txttag");
            CalculateRetailMarginPern(MRP);
        }, 500)
    })
    function CalculateMarginPern(PurchasePrice) {
        var PPrice = parseFloat(PurchasePrice);//document.getElementById("txtPurPrice").getAttribute("txttag")
        var SalePerc = parseFloat(document.getElementById("txtSPrice").getAttribute("txttag"));
        var ECPPerc = parseFloat(document.getElementById("txtECPrice").getAttribute("txttag"));
        var SPLPerc = parseFloat(document.getElementById("txtSPLPrice").getAttribute("txttag"));
        //showErrorSnackbar("Sale: " + SalePerc + "ECP: " + ECPPerc + "SPL: " + SPLPerc);
        var SaleDiff = SalePerc - PPrice;
        var ECPDiff = ECPPerc - PPrice;
        var SPLDiff = SPLPerc - PPrice;

        var salemargin = (SaleDiff * 100) / PPrice;
        var ecpmargin = (ECPDiff * 100) / PPrice;
        var splmargin = (SPLDiff * 100) / PPrice;
        updateLabelColumn("lblSaleMarginPern", salemargin);
        updateLabelColumn("lblECPMarginPern", ecpmargin);
        updateLabelColumn("lblSPLMarginPern", splmargin);
        //alert("Sale : " + salemargin + "\nECP : " + ecpmargin + "\nSPL : " + splmargin);
        //setTimeout(() => {
        //    var MRP = parseFloat(document.getElementById("txtMRP").getAttribute("txttag"));
        //    CalculateRetailMarginPern(MRP)
        //}, 1000);
    }

    function CalculateRetailMarginPern(MRP) {
        var PPrice = parseFloat(MRP);//document.getElementById("txtPurPrice").getAttribute("txttag")
        var PurchasePerc = parseFloat(document.getElementById("txtPurPriceIncl").getAttribute("txttag"));
        var SalePerc = parseFloat(document.getElementById("txtSPriceIncl").getAttribute("txttag"));
        var ECPPerc = parseFloat(document.getElementById("txtECPriceIncl").getAttribute("txttag"));
        var SPLPerc = parseFloat(document.getElementById("txtSPLPriceIncl").getAttribute("txttag"));
        //showErrorSnackbar("Sale: " + SalePerc + "ECP: " + ECPPerc + "SPL: " + SPLPerc);
        console.log("Pur :", PurchasePerc, ",Sale : ", SalePerc, ", ECP :", ECPPerc, ",SPL : ", SPLPerc, ",MRP : ", PPrice);
        var PurDiff = PPrice - PurchasePerc;
        var SaleDiff = PPrice - SalePerc;
        var ECPDiff = PPrice - ECPPerc;
        var SPLDiff = PPrice - SPLPerc;

        var perchasemargin = (PurDiff * 100) / PPrice;
        var salemargin = (SaleDiff * 100) / PPrice;
        var ecpmargin = (ECPDiff * 100) / PPrice;
        var splmargin = (SPLDiff * 100) / PPrice;
        updateLabelColumn("lblRetailPurchaseMarginPern", perchasemargin > 0 ? perchasemargin : 0);
        updateLabelColumn("lblRetailSaleMarginPern", salemargin > 0 ? salemargin : 0);
        updateLabelColumn("lblRetailECPMarginPern", ecpmargin > 0 ? ecpmargin : 0);
        updateLabelColumn("lblRetailSPLMarginPern", splmargin > 0 ? splmargin : 0);
        //alert("Sale : " + salemargin + "\nECP : " + ecpmargin + "\nSPL : " + splmargin);
    }

    function CalculateMarginPernforSaleECPSPLExcl(PurchasePrice, fieldid,Value) {
        var SalePerc = 0, ECPPerc = 0, SPLPerc = 0;
        var PPrice = parseFloat(PurchasePrice);
        if (fieldid == "txtSPrice") {
            SalePerc = Value;
        } else {
            SalePerc = parseFloat(document.getElementById("txtSPrice").getAttribute("txttag"));
        }
        if (fieldid == "txtECPrice") {
            ECPPerc = Value;
        } else {
            ECPPerc = parseFloat(document.getElementById("txtECPrice").getAttribute("txttag"));
        }
        if (fieldid == "txtSPLPrice") {
            SPLPerc = Value;
        } else {
            SPLPerc = parseFloat(document.getElementById("txtSPLPrice").getAttribute("txttag"));
        }
        var SaleDiff = SalePerc - PPrice;
        var ECPDiff = ECPPerc - PPrice;
        var SPLDiff = SPLPerc - PPrice;

        var salemargin = (SaleDiff * 100) / PPrice;
        var ecpmargin = (ECPDiff * 100) / PPrice;
        var splmargin = (SPLDiff * 100) / PPrice;
        updateLabelColumn("lblSaleMarginPern", salemargin);
        updateLabelColumn("lblECPMarginPern", ecpmargin);
        updateLabelColumn("lblSPLMarginPern", splmargin);
        //setTimeout(() => {
        //    var MRP = parseFloat(document.getElementById("txtMRP").getAttribute("txttag"));
        //    CalculateRetailMarginPern(MRP)
        //}, 1000);
    }
    $(".txtsaletaxIncl").keyup(function (e) {
        var val = e.target.value;
        var id = e.target.id;
        if ($("#cmbSTax").val() > 0) {
            var txpern = $("#txtSTaxPern").val();
            var excl = parseFloat(val) / parseFloat(1 + (txpern / 100));
            //$("#txtPurPrice").val(incl);
            var exid = id.substring(0, id.length - 4);
            updateInputColumn(exid, excl);
        } else {
            $("#cmbSTax").focus();
            updateInputColumn(id, 0);
            updateInputColumn(id + "Incl", 0);
            showErrorSnackbar("Select Sale Tax");
        }
        var exclprice = document.getElementById("txtPurPrice").getAttribute("txttag");
        CalculateMarginPern(exclprice);
        setTimeout(() => {
            var MRP = document.getElementById("txtMRP").getAttribute("txttag");
            CalculateRetailMarginPern(MRP);
        }, 500)
    })
    $("#txtCode").blur(function () {
        if ($("#txtEAN").val() == "") {
            $("#txtEAN").val($("#txtCode").val())
        }
    });
    $("#cmbBarUOM,#cmbBarPrice").prop("disabled", true);
    $("#chkBarcodePrint").click(function () {
        var Bchk = $("#chkBarcodePrint").is(":checked");
        $("#cmbBarUOM,#cmbBarPrice").prop("disabled", !Bchk);
        $("#cmbBarUOM,#cmbBarPrice").val(0);
    })
    $("#cmbBaseUOM").change(function () {
        if ($("#cmbBaseUOM").val() > 0) {
            $("#txtBaseCR").prop("disabled", true);
            //$("#txtBaseCR").val("1");
            updateInputColumn("txtBaseCR", 1);
            if (nMode == 1) {
                var baseuom = $("#cmbBaseUOM").val();
                $("#cmbPurchaseUOM").val(baseuom);
                updateInputColumn("txtPurchaseCR", 1);

                $("#cmbSalesUOM").val(baseuom);
                updateInputColumn("txtSalesCR", 1);

                $("#cmbReportingUOM").val(baseuom);
                updateInputColumn("txtReportingCR", 1);
            }
            //"BaseUomID": $("#cmbBaseUOM").val(),
            //"BaseCR": document.getElementById("txtBaseCR").getAttribute("txttag"),//$("#txtBaseCR").val(),
            //"PurchaseUomID": $("#cmbPurchaseUOM").val(),
            //"PurchaseCR": document.getElementById("txtPurchaseCR").getAttribute("txttag"),//$("#txtPurchaseCR").val(),
            //"SalesUomID": $("#cmbSalesUOM").val(),
            //"SalesCR": document.getElementById("txtSalesCR").getAttribute("txttag"),//$("#txtSalesCR").val(),
            //"ReportingUomID": $("#cmbReportingUOM").val(),
            //"ReportingCR": document.getElementById("txtReportingCR").getAttribute("txttag"),//$("#txtReportingCR").val(),

        }
        else {
            $("#txtBaseCR").prop("disabled", false);
            $("#txtBaseCR").val("");
        }
    });
    function displayResult(item) {
        $('.alert').show().html('You selected <strong>' + item.value + '</strong>: <strong>' + item.text + '</strong>');
    }
    function SetAutlistforFields() {
        ////Manuf
        //var txtName1 = $('#txtMfr');
        //autocomplete = txtName1.typeahead({ scrollBar: true, onSelect: displayResult });
        //autocomplete.data('typeahead').source = null;
        //autocomplete.data('typeahead').source = arrManuf;
        $("#txtMfr").autocomplete({
            minLength: 0,
            source: arrALManuf,
            //autoFocus: true,
            //focus: function (event, ui) {
            //    $("#txtName").val(ui.item.label);
            //    return false;
            //},
            select: function (event, ui) {
                $("#txtMfr").val(ui.item.label);
                //$("#txtRemarks").val(ui.item.id);
                return false;
            },
        }).autocomplete("instance")._renderItem = function (ul, item) {
            return $("<li class='each'>")
                .append("<div class='acItem'><span class='name'>" +
                    item.label + "</span></div>")
                .appendTo(ul);
        };
        //Brand
        //var txtName = $('#txtBrand');
        //autocomplete = txtName.typeahead({ scrollBar: true, onSelect: displayResult });
        //autocomplete.data('typeahead').source = null;
        //autocomplete.data('typeahead').source = arrBrand;
        $("#txtBrand").autocomplete({
            minLength: 0,
            source: arrALBrand,
            //autoFocus: true,
            //focus: function (event, ui) {
            //    $("#txtName").val(ui.item.label);
            //    return false;
            //},
            select: function (event, ui) {
                $("#txtBrand").val(ui.item.label);
                //$("#txtRemarks").val(ui.item.id);
                return false;
            },
        }).autocomplete("instance")._renderItem = function (ul, item) {
            return $("<li class='each'>")
                .append("<div class='acItem'><span class='name'>" +
                    item.label + "</span></div>")
                .appendTo(ul);
        };
        //Category
        //txtName = $('#txtCategory');
        //autocomplete = txtName.typeahead({ scrollBar: true, onSelect: displayResult });
        //autocomplete.data('typeahead').source = null;
        //autocomplete.data('typeahead').source = arrCategory;
        $("#txtCategory").autocomplete({
            minLength: 0,
            source: arrALCategory,
            //autoFocus: true,
            //focus: function (event, ui) {
            //    $("#txtName").val(ui.item.label);
            //    return false;
            //},
            select: function (event, ui) {
                $("#txtCategory").val(ui.item.label);
                //$("#txtRemarks").val(ui.item.id);
                return false;
            },
        }).autocomplete("instance")._renderItem = function (ul, item) {
            return $("<li class='each'>")
                .append("<div class='acItem'><span class='name'>" +
                    item.label + "</span></div>")
                .appendTo(ul);
        };
        //Vendor
        //txtName = $('#txtVendor');
        //autocomplete = txtName.typeahead({ scrollBar: true, onSelect: displayResult });
        //autocomplete.data('typeahead').source = null;
        //autocomplete.data('typeahead').source = arrVendor;
        $("#txtVendor").autocomplete({
            minLength: 0,
            source: arrALVendor,
            //autoFocus: true,
            //focus: function (event, ui) {
            //    $("#txtName").val(ui.item.label);
            //    return false;
            //},
            select: function (event, ui) {
                $("#txtVendor").val(ui.item.label);
                //$("#txtRemarks").val(ui.item.id);
                return false;
            },
        }).autocomplete("instance")._renderItem = function (ul, item) {
            return $("<li class='each'>")
                .append("<div class='acItem'><span class='name'>" +
                    item.label + "</span></div>")
                .appendTo(ul);
        };
        //Vendor
        //txtName = $('#txtLocation');
        //autocomplete = txtName.typeahead({ scrollBar: true, onSelect: displayResult });
        //autocomplete.data('typeahead').source = null;
        //autocomplete.data('typeahead').source = arrLoc;
        $("#txtLocation").autocomplete({
            minLength: 0,
            source: arrALLoc,
            //autoFocus: true,
            //focus: function (event, ui) {
            //    $("#txtName").val(ui.item.label);
            //    return false;
            //},
            select: function (event, ui) {
                $("#txtLocation").val(ui.item.label);
                //$("#txtRemarks").val(ui.item.id);
                return false;
            },
        }).autocomplete("instance")._renderItem = function (ul, item) {
            return $("<li class='each'>")
                .append("<div class='acItem'><span class='name'>" +
                    item.label + "</span></div>")
                .appendTo(ul);
        };
    }
    var modal = document.getElementById("myModalfg");
    var span = document.getElementsByClassName("closefg")[0];
    span.onclick = function () {
        modal.style.display = "none";
    }
    function CloseForm() {
        modal.style.display = "none";
    }

    $('#btnClose').click(function (e) {
        if (ClosecfFocus != 3) { CloseConfirmDialogMsg("Do you want to close?"); } else { CloseForm(); }
    });
    $("#btnAdd").click(function (e) {
        nMode = 1;
        $("input[type=checkbox],#btnSave,#btnClear,.FormclrField,.FormclrcmbField").prop("disabled", false);
        $("#chkActive").prop("disabled", true);
        $(".modal-title#lblPopupheading").text("Add " + $("#MainHeading").text());
        modal.style.display = "block";
        openTabs(e, 'ProductDetails', 1);
        ClearForm();
    });

    $('#btnClear').click(function (e) {
        if (cfFocus != 3) { ClearConfirmDialogMsg("Do you want to clear?"); } else { ClearForm(); }
    });
    function ClearForm() {
        ids = 0, Salesmanids = 0;
        $(".FormclrField").val("");
        SetTagZero();
        $(".FormclrcmbField").val(0);
        $(".lblMargins").text("0.00");
        $("input[type=checkbox]").prop("checked", false);
        $("#txtBaseCR").prop("disabled", false);
        $("#chkActive").prop("checked", true);
        $("#chkActive").prop("disabled", nMode != 2);
        $("#txtOSCount,#txtOSValue").prop("disabled", true);
        $(".clrdivs").html("");
        $("#dvErrorDetail").hide();
        $("#lblSaveError").html("");
        $("#chkBarcodePrint").prop("checked", false);
        $("#cmbBarUOM,#cmbBarPrice").prop("disabled", true);
        $("#rdoDMY,#rdoMY").prop("disabled", true);
        $("#chkTrackInv,#chkTrackBatch,#chkTrackPKD").prop("disabled", false);
        $("#txtCode").focus();
        $("#txtBaseCR").prop("disabled", true);
        updateInputColumn("txtPrice", 0);
        $('#cmbPriceUOM').find("option").remove();
        $('#cmbPriceUOM').append($('<option/>', {
            value: 0,
            text: "-- Select --",
            name: 1
        }));
        if (nMode == 1) {
            $("#chkTrackInv").prop("checked", true);
            $("#chkTrackInv").prop("disabled", true);
        }
    }
    if ($("#txtTransType").val() == "2") {
        if ($("#txtID").val() > 0) {
            nMode = 2;
            $(".clrdiv").html("");

            document.getElementById('ProductDetails').style.display = "block";
            document.getElementById("btnProdDtl").className += " active";
            //openTabs(e, 'ProductDetails', 1);
            $(".modal-title#lblPopupheading").text("Edit " + $("#MainHeading").text());
            var ID = $("#txtID").val();
            GetData(4, ID);
            $(".FormclrField,.FormclrcmbField").prop("disabled", false);
            $("input[type=checkbox],#chkActive,#btnSave").prop("disabled", false);
            $("#btnClear").prop("disabled", true);
            modal.style.display = "block";
            $(".clrdivs").html("");
            $("#dvErrorDetail").hide();
            $("#lblSaveError").html("");
            $("#txtBaseCR").prop("disabled", true);
        }
    }
    $("#btnSave").click(function () {
        $(".clrdivs").html("");
        $("#lblSaveError").html("");
        var IsValid = true, ChkFormation = true;
        var Errors = "";
        if ($("#txtCode").val() == "") {
            IsValid = false;
            $("#divErrorOnCode").html("Product Code should not be empty");
            Errors += "Product Details : Product Code should not be empty<br/>";
            showErrorSnackbar("Product Details : Product Code should not be empty");
        }
        if ($("#txtName").val() == "") {
            IsValid = false;
            $("#divErrorOnName").html("Product Name should not be empty");
            Errors += "Product Details : Product Name should not be empty<br/>";
            showErrorSnackbar("Product Details : Product Name should not be empty");
        }
        if ($("#txtEAN").val() == "") {
            IsValid = false;
            $("#divErrorOnEAN").html("EAN should not be empty");
            Errors += "Product Details : EAN should not be empty<br/>";
            showErrorSnackbar("Product Details : EAN should not be empty");
        }

        if ($("#txtMfr").val() == "") {
            IsValid = false;
            $("#divErrorOnMfr").html("Manufacturer Name should not be empty");
            Errors += "Product Details : Manufacturer Name should not be empty<br/>";
            showErrorSnackbar("Product Details : Manufacturer Name should not be empty");
        }
        else {
            const exists = arrManuf.indexOf($("#txtMfr").val().trim()) !== -1;
            if (!exists) {
                IsValid = false;
                $("#divErrorOnMfr").html("Manufacturer Name select from list");
                Errors += "Product Details : Manufacturer Name select from list<br/>";
                showErrorSnackbar("Product Details : Manufacturer Name select from list");
            }
        }
        if ($("#txtBrand").val() == "") {
            IsValid = false;
            $("#divErrorOnBrand").html("Brand Name should not be empty");
            Errors += "Product Details : Brand Name should not be empty<br/>";
            showErrorSnackbar("Product Details : Brand Name should not be empty");
        }
        else {
            const exists = arrBrand.indexOf($("#txtBrand").val().trim()) !== -1;
            if (!exists) {
                IsValid = false;
                $("#divErrorOnBrand").html("Brand Name select from list");
                Errors += "Product Details : Brand Name select from list<br/>";
                showErrorSnackbar("Product Details : Brand Name select from list");
            }
        }
        if ($("#txtCategory").val() == "") {
            IsValid = false;
            $("#divErrorOnCategory").html("Category Name should not be empty");
            Errors += "Product Details : Category Name should not be empty<br/>";
            showErrorSnackbar("Product Details : Category Name should not be empty");
        }
        else {
            const exists = arrCategory.indexOf($("#txtCategory").val().trim()) !== -1;
            if (!exists) {
                IsValid = false;
                $("#divErrorOnCategory").html("Category Name select from list");
                Errors += "Product Details : Category Name select from list<br/>";
                showErrorSnackbar("Product Details : Category Name select from list");
            }
        }
        if ($("#txtVendor").val() != "") {
            const exists = arrVendor.indexOf($("#txtVendor").val().trim()) !== -1;
            if (!exists) {
                IsValid = false;
                $("#divErrorOnVendor").html("Vendor Name select from list");
                Errors += "Other Details : Vendor Name select from list<br/>";
                showErrorSnackbar("Other Details : Vendor Name select from list");
            }
        }
        if ($("#txtLocation").val() != "") {
            const exists = arrLoc.indexOf($("#txtLocation").val().trim()) !== -1;
            if (!exists) {
                IsValid = false;
                $("#divErrorOnLocation").html("Location select from list");
                Errors += "Other Details : Location select from list<br/>";
                showErrorSnackbar("Other Details : Location select from list");
            }
        }

        if ($("#txtProdDisc").val() > 100) {
            IsValid = false;
            $("#divErrorOnProdDisc").html("Product Discount % should be less than 100");
            Errors += "Product Details : Product Discount % should be less than 100<br/>";
            showErrorSnackbar("Product Details : Product Discount % should be less than 100");
        }
        if ($("#cmbBaseUOM").val() == 0) {
            IsValid = false;
            $("#divErrorOnBaseUOM").html("Select Base UOM");
            Errors += "UOM Details : Select Base UOM<br/>";
            showErrorSnackbar("UOM Details : Select Base UOM");
        }
        if ($("#txtBaseCR").val() == "") {
            IsValid = false;
            $("#divErrorOnBaseCR").html("Base Conversion Rate should not be empty");
            Errors += "UOM Details : Base Conversion Rate should not be empty<br/>";
            showErrorSnackbar("UOM Details : Base Conversion Rate should not be empty");
        }
        if ($("#cmbPurchaseUOM").val() == 0) {
            IsValid = false;
            $("#divErrorOnPurchaseUOM").html("Select Purchase UOM");
            Errors += "UOM Details : Select Base UOM<br/>";
            showErrorSnackbar("UOM Details : Select Base UOM");
        }
        if ($("#txtPurchaseCR").val() == "") {
            IsValid = false;
            $("#divErrorOnPurchaseCR").html("Purchase Conversion Rate should not be empty");
            Errors += "UOM Details : Purchase Conversion Rate should not be empty<br/>";
            showErrorSnackbar("UOM Details : Purchase Conversion Rate should not be empty");
        }

        if ($("#cmbSalesUOM").val() == 0) {
            IsValid = false;
            $("#divErrorOnSalesUOM").html("Select Sale UOM");
            Errors += "UOM Details : Select Sale UOM<br/>";
            showErrorSnackbar("UOM Details : Select Sale UOM");
        }
        if ($("#txtSalesCR").val() == "") {
            IsValid = false;
            $("#divErrorOnSalesCR").html("Sale Conversion Rate should not be empty");
            Errors += "UOM Details : Sale Conversion Rate should not be empty<br/>";
            showErrorSnackbar("UOM Details : Sale Conversion Rate should not be empty");
        }
        if ($("#cmbReportingUOM").val() == 0) {
            IsValid = false;
            $("#divErrorOnReportingUOM").html("Select Reporting UOM");
            Errors += "UOM Details : Select Reporting UOM<br/>";
            showErrorSnackbar("UOM Details : Select Reporting UOM");
        }
        if ($("#txtReportingCR").val() == "") {
            IsValid = false;
            $("#divErrorOnReportingCR").html("Reporting Conversion Rate should not be empty");
            Errors += "UOM Details : Reporting Conversion Rate should not be empty<br/>";
            showErrorSnackbar("UOM Details : Reporting Conversion Rate should not be empty");
        }
        if ($("#cmbPTax").val() == 0) {
            IsValid = false;
            $("#divErrorOnPTax").html("Select Purchase Tax");
            Errors += "Price Details : Select Purchase Tax<br/>";
            showErrorSnackbar("Price Details : Select Purchase Tax");
        }
        if ($("#cmbSTax").val() == 0) {
            IsValid = false;
            $("#divErrorOnSTax").html("Select Sales Tax");
            Errors += "Price Details : Select Sales Tax<br/>";
            showErrorSnackbar("Price Details : Select Sales Tax");
        }
        var Bchk = $("#chkBarcodePrint").is(":checked");
        if (Bchk) {
            if ($("#cmbBarUOM").val() == 0) {
                IsValid = false;
                $("#divErrorOnBarUOM").html("Select Barcode UOM");
                Errors += "Other Details : Select Barcode UOM<br/>";
                showErrorSnackbar("Other Details : Select Barcode UOM");
            }
            if ($("#cmbBarPrice").val() == 0) {
                IsValid = false;
                $("#divErrorOnBarPrice").html("Select Barcode Price");
                Errors += "Other Details : Select Barcode Price<br/>";
                showErrorSnackbar("Other Details : Select Barcode Price");
            }
        }
        ChkFormation = HSNValidation($("#txtHSN"), $("#divErrorOnHSN"), false);
        if (!ChkFormation) {
            IsValid = false;
        }

        if (IsValid) {
            if (cfFocus != 3) { ConfirmDialogMsg("Do you want to save data?"); } else { SaveData(); }
        }
        else {
            //$("#dvErrorDetail").show();
           // $("#lblSaveError").html(Errors);
        }
    });
    function SaveData() {
        $("#btnSave").prop("disabled", true);
        $(".clrdiv").html("");
        var name = $("#txtName").val();
        var code = $("#txtCode").val();
        var lstMaster = {
            "Mode": nMode,
            "ID": $("#txtID").val(),
            "Code": $("#txtCode").val(),
            "Name": $("#txtName").val(),
            "EAN": $("#txtEAN").val(),
            "MfrID": $("#txtMfr").val(),
            "BrandID": $("#txtBrand").val(),
            "CategoryID": $("#txtCategory").val(),
            "HSNCode": $("#txtHSN").val(),
            "ProductDiscPerc": document.getElementById("txtProdDisc").getAttribute("txttag"),// $("#txtProdDisc").val(),
            "BaseUomID": $("#cmbBaseUOM").val(),
            "BaseCR": document.getElementById("txtBaseCR").getAttribute("txttag"),//$("#txtBaseCR").val(),
            "PurchaseUomID": $("#cmbPurchaseUOM").val(),
            "PurchaseCR": document.getElementById("txtPurchaseCR").getAttribute("txttag"),//$("#txtPurchaseCR").val(),
            "SalesUomID": $("#cmbSalesUOM").val(),
            "SalesCR": document.getElementById("txtSalesCR").getAttribute("txttag"),//$("#txtSalesCR").val(),
            "ReportingUomID": $("#cmbReportingUOM").val(),
            "ReportingCR": document.getElementById("txtReportingCR").getAttribute("txttag"),//$("#txtReportingCR").val(),
            "ReportingQty": document.getElementById("txtReportingCR").getAttribute("txttag"),
            "PurchaseTaxID": $("#cmbPTax").val(),
            "SalesTaxID": $("#cmbSTax").val(),
            "PurchasePrice": document.getElementById("txtPurPrice").getAttribute("txttag"),// $("#txtPurPrice").val(),
            "SalesPrice": document.getElementById("txtSPrice").getAttribute("txttag"),//$("#txtSPrice").val(),
            "ECP": document.getElementById("txtECPrice").getAttribute("txttag"),//$("#txtECPrice").val(),
            "SPLPrice": document.getElementById("txtSPLPrice").getAttribute("txttag"),//$("#txtSPLPrice").val(),
            "MRP": document.getElementById("txtMRP").getAttribute("txttag"),//$("#txtMRP").val(),
            "ReturnPrice": document.getElementById("txtRTNPrice").getAttribute("txttag"),//$("#txtRTNPrice").val(),
            "SaleonMRP": $("#chkApplySalesPerc").is(":checked") ? 1 : 0,
            "SaleonpPern": document.getElementById("txtSPricePerc").getAttribute("txttag"),
            "ECPonMRP": $("#chkApplyECPPerc").is(":checked") ? 1 : 0,
            "ECPonpPern": document.getElementById("txtECPricePerc").getAttribute("txttag"),
            "SPLonMRP": $("#chkApplySPLPerc").is(":checked") ? 1 : 0,
            "SPLonpPern": document.getElementById("txtSPLPricePerc").getAttribute("txttag"),
            "TrackInventory": $("#chkTrackInv").is(":checked") ? 1 : 0,
            "TrackBatch": $("#chkTrackBatch").is(":checked") ? 1 : 0,
            "TrackSerial": $("#chkTrackSerial").is(":checked") ? 1 : 0,
            "TrackPDK": $("#chkTrackPKD").is(":checked") ? 1 : 0,
            "DateFormat": $("#rdoDMY").is(":checked") ? 1 : 2,
            "BarcodeUomID": $("#cmbBarUOM").val(),
            "BarcodePriceID": $("#cmbBarPrice").val(),
            "VendorID": $("#txtVendor").val(),
            "LocationID": $("#txtLocation").val(),
            "MOH": $("#txtMOH").val(),
            "MOQ": $("#txtMOQ").val(),
            "Remarks": $("#txtRemarks").val(),
            "Active": $("#chkActive").is(":checked") ? 1 : 0,
            "Weborder": $("#txtWebOrder").val(),
            "BarcodePrint": $("#chkBarcodePrint").is(":checked") ? 1 : 0,
            "ProdLifeTime": $('#cmbLifeTime').val(),
            "PurchaseBillPrice": document.getElementById("txtPurBillPrice").getAttribute("txttag"),
            "PurchaseReturnPrice": document.getElementById("txtPurRtnPrice").getAttribute("txttag"),
            "InvoicePrice": document.getElementById("txtInvoicePrice").getAttribute("txttag"),
            "SalesReturnPrice": document.getElementById("txtSaleRtnPrice").getAttribute("txttag"),
            "CBy": UID,
        };
            $.ajax({
                url: Aurl + "productmaster/save",
                type: 'POST',
                contentType: 'application/json; charset=utf-8',
                data: JSON.stringify(lstMaster),
                cache: false,
                processData: false,
                xhrFields: {
                    withCredentials: true
                },
                success: function (data) {
                    $("#btnSave").prop("disabled", false);
                    $.each(data, function (i, items) {
                        if (items.MsgID == 0) {
                            showSuccessSnackbar(items.Message);
                            ClearForm();
                            AllProductData();
                            GetData(3);
                            modal.style.display = "none";
                            var depfrom = $("#txtDependFrom").val();
                            if (window.opener && !window.opener.closed) {
                                if (depfrom == "0") {// PO,PB
                                    window.opener.GetData(4, code);
                                    //window.opener.$('#txtHProds').val(name)
                                }
                                else if (depfrom == "1") {//Inventory Adjustment New Batch price update
                                    window.opener.GetProductNewBatchData(items.ID);
                                }
                                window.close();
                            }

                        }
                        else if (items.Message == "Code") {
                            $("#divErrorOnCode").html("Product Code already Exist");
                            showErrorSnackbar("Product Code already Exist");
                        }
                        else if (items.Message == "Name")
                        {
                            $("#divErrorOnName").html("Product Name already Exist");
                            showErrorSnackbar("Product Name already Exist");
                        }
                        else if (items.Message == "EAN") {
                            $("#divErrorOnEAN").html("EAN already Exist");
                            showErrorSnackbar("EAN Code already Exist");
                        }
                        else if (items.Message == "Active") {
                            $("#divErrorOnActive").html("Qty product cannot be de-Actived.");
                            showErrorSnackbar("Qty product cannot be de-Actived.");
                        }
                        else {
                            //$("#dvErrorName").html(items.Message);
                            showErrorSnackbar(items.Message);
                        }
                    });
                }, error: function (data) {
                    $("#btnSave").prop("disabled", false);
                    if (data.status == "401") {
                        var msg = data.responseJSON.Message;
                        //showErrorSnackbar(msg + " Logout and Login again.");
                    }
                }
            });
    }
    $('#tblMasterData tbody').on('click', '.clsView', function (e) {
        $(".clrdiv").html("");
        $(".modal-title#lblPopupheading").text("View " + $("#MainHeading").text());
        rowdata = Table.row($(this).parents('tr')).data();
        var ID = rowdata.ID;//[0];
        $("#txtID").val(ID);
        openTabs(e, 'ProductDetails', 1);
        GetData(4, ID);
        $(".FormclrField,.FormclrcmbField").prop("disabled", true);
        $("input[type=checkbox],#btnSave,#btnClear").prop("disabled", true);
        modal.style.display = "block";
        $(".clrdivs").html("");
        $("#dvErrorDetail").hide();
        $("#lblSaveError").html("");
        $("#txtBaseCR").prop("disabled", true);
        setTimeout(() => {
            $("#chkTrackInv").prop("disabled", true);
        }, 500);
    });

    $('#tblMasterData tbody').on('click', '.clsEdit', function (e) {
        nMode = 2;
        $(".clrdiv").html("");
        openTabs(e, 'ProductDetails',1);
        $(".modal-title#lblPopupheading").text("Edit " + $("#MainHeading").text());
        rowdata = Table.row($(this).parents('tr')).data();
        var ID = rowdata.ID;//[0];

        $("#txtID").val(ID);
        GetData(4, ID);
        $(".FormclrField,.FormclrcmbField").prop("disabled", false);
        $("input[type=checkbox],#chkActive,#btnSave").prop("disabled", false);
        $("#btnClear").prop("disabled", true);
        modal.style.display = "block";
        $(".clrdivs").html("");
        $("#dvErrorDetail").hide();
        $("#lblSaveError").html("");
        $("#txtBaseCR").prop("disabled", true);

    });
    $('#tblMasterData tbody').on('click', '.clsVariant', function (e) {
        nMode = 1;
        $(".modal-title#lblPopupheading").text("Variant " + $("#MainHeading").text());
        $(".clrdiv").html("");
        openTabs(e, 'ProductDetails', 1);
        modal.style.display = "block";

        rowdata = Table.row($(this).parents('tr')).data();
        var ID = rowdata.ID;//[0];
        GetData(4, ID, true);
        $("#txtID").val(ID);

        $(".FormclrField,.FormclrcmbField").prop("disabled", false);
        $("input[type=checkbox],#chkActive,#btnSave,#btnClear").prop("disabled", false);
        $("#txtCode,#txtName,#txtEAN").val("");
        $(".clrdivs").html("");
        $("#dvErrorDetail").hide();
        $("#lblSaveError").html("");
        $("#txtBaseCR").prop("disabled", true);

        setTimeout(() => {
            $("#chkTrackInv").prop("disabled", true);
            $("#chkTrackInv").prop("checked", true);
        }, 500);
    });

</script>